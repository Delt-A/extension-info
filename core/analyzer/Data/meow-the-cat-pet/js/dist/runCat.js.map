{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/browserCat.js","webpack:///./node_modules/core-js/internals/an-object.js","webpack:///./node_modules/core-js/internals/array-includes.js","webpack:///./node_modules/core-js/internals/classof-raw.js","webpack:///./node_modules/core-js/internals/copy-constructor-properties.js","webpack:///./node_modules/core-js/internals/create-html.js","webpack:///./node_modules/core-js/internals/create-non-enumerable-property.js","webpack:///./node_modules/core-js/internals/create-property-descriptor.js","webpack:///./node_modules/core-js/internals/descriptors.js","webpack:///./node_modules/core-js/internals/document-create-element.js","webpack:///./node_modules/core-js/internals/enum-bug-keys.js","webpack:///./node_modules/core-js/internals/export.js","webpack:///./node_modules/core-js/internals/fails.js","webpack:///./node_modules/core-js/internals/forced-string-html-method.js","webpack:///./node_modules/core-js/internals/function-to-string.js","webpack:///./node_modules/core-js/internals/get-built-in.js","webpack:///./node_modules/core-js/internals/global.js","webpack:///./node_modules/core-js/internals/has.js","webpack:///./node_modules/core-js/internals/hidden-keys.js","webpack:///./node_modules/core-js/internals/ie8-dom-define.js","webpack:///./node_modules/core-js/internals/indexed-object.js","webpack:///./node_modules/core-js/internals/internal-state.js","webpack:///./node_modules/core-js/internals/is-forced.js","webpack:///./node_modules/core-js/internals/is-object.js","webpack:///./node_modules/core-js/internals/is-pure.js","webpack:///./node_modules/core-js/internals/native-weak-map.js","webpack:///./node_modules/core-js/internals/object-assign.js","webpack:///./node_modules/core-js/internals/object-define-property.js","webpack:///./node_modules/core-js/internals/object-get-own-property-descriptor.js","webpack:///./node_modules/core-js/internals/object-get-own-property-names.js","webpack:///./node_modules/core-js/internals/object-get-own-property-symbols.js","webpack:///./node_modules/core-js/internals/object-keys-internal.js","webpack:///./node_modules/core-js/internals/object-keys.js","webpack:///./node_modules/core-js/internals/object-property-is-enumerable.js","webpack:///./node_modules/core-js/internals/own-keys.js","webpack:///./node_modules/core-js/internals/path.js","webpack:///./node_modules/core-js/internals/redefine.js","webpack:///./node_modules/core-js/internals/require-object-coercible.js","webpack:///./node_modules/core-js/internals/set-global.js","webpack:///./node_modules/core-js/internals/shared-key.js","webpack:///./node_modules/core-js/internals/shared-store.js","webpack:///./node_modules/core-js/internals/shared.js","webpack:///./node_modules/core-js/internals/to-absolute-index.js","webpack:///./node_modules/core-js/internals/to-indexed-object.js","webpack:///./node_modules/core-js/internals/to-integer.js","webpack:///./node_modules/core-js/internals/to-length.js","webpack:///./node_modules/core-js/internals/to-object.js","webpack:///./node_modules/core-js/internals/to-primitive.js","webpack:///./node_modules/core-js/internals/uid.js","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./node_modules/core-js/modules/es.object.assign.js","webpack:///./node_modules/core-js/modules/es.object.keys.js","webpack:///./node_modules/core-js/modules/es.string.anchor.js","webpack:///./node_modules/core-js/modules/es.string.blink.js","webpack:///(webpack)/buildin/global.js"],"names":["catPetSetObject","window","catpet","idleTypes","songElement","loadedImages","getURL","img","chrome","extension","width","height","hitPoisitons","currentBubbleIndex","preload","arr","i","length","Image","src","isPlayground","document","getElementById","isCatpetPlayground","container","body","bubbleWidth","bubbleHeight","isTabActive","defaultCatID","isDebug","availableFood","chicken","file_name","class_name","fish","cheese","pizza","chocolate","donut","draggableElement","dragPositions","x_pos","y_pos","x_elem","y_elem","log","message","console","debug","isPetActive","catID","activePets","menuHTML","Pet","browserPetData","holderElement","devTracker","catIsMine","isBrowserPet","lastSnowThrown","walkingDots","walkingInfo","destinationX","destinationY","speed","isDragging","pingInterval","currentMovingActionInterval","currentAnimationTimeout","changeDanceInterval","animationName","clearBubbleTimeout","currentBubble","startPettingTimeout","pettingRewardInterval","rendererContainer","rendererPet","scale","stats","posLeft","direction","posTop","walk","talk","hideUntil","name","clowderName","idleType","level","skin","eyes","hat","_self","distanceBetweenTwoPoints","x1","y1","x2","y2","a","b","c","Math","sqrt","_drag_init","e","elem","all","event","clientX","pageX","clientY","pageY","offsetLeft","offsetTop","_move_elem","style","left","top","setDraggable","id","onmousedown","which","idle","initiator","killMeowContextMenu","preventDefault","onmousemove","blink","changeAnimation","addAnimation","blinkRandom","num","ceil","random","setTimeout","initiate","data","setInterval","runtime","sendMessage","method","response","kill","uid","userID","browserPet","isNaN","locationX","locationY","toLowerCase","userType","tagColor","draw","setEvents","sleep","sad","dig","sendPositionsToBG","sendToBackground","changeSkin","skinName","empty","RenderManager","resources","cat","spineData","findSkin","variation","PIXI","spine","core","Skin","skinParent","eyesIndex","findSlot","index","hatIndex","idx","attachments","tst","Object","assign","openEyesRegion","spineAtlas","findRegion","newRegion","RegionAttachment","Open","setRegion","sadEyesRegion","Sad","tiredEyesRegion","Tired","push","skeleton","setSkin","setToSetupPose","update","setSkinByName","getAttachmentByName","setAttachment","el","className","fromTop","floor","viewport","fromLeft","custumData","Spine","filters","actionsTop","actionsHalf","actionsDown","actionIDX","stateData","setMix","state","addListener","entry","complete","start","animation","end","dispose","interrupted","x","y","autoUpdate","interactive","catContainer","Container","parentLayer","layer","zOrder","currzIndex","bottomContainer","addChild","catName","Text","tagStyle","anchor","catLevel","fontSize","fill","align","fontFamily","fontWeight","catClowder","fillGradientType","rendererLevel","rendererName","rendererClowder","createElement","positionTop","positionLeft","pgWorld","view","bubbleHTML","innerHTML","appendChild","reposition","containers","pets","contextMenuToggle","action","type","contextWidth","contextHeight","remove","leftPos","topPos","addEventListener","eat","dance","lick","redrawPet","hide","petOnly","pet","clearTimeout","prevent","path","stopPropagation","loadDataFromLocalStorage","walkType","drawPositions","position","fixPositions","returnValues","abs","changeHTML","updateBG","reportToServer","report","didItemHitCat","result","dist","parseInt","startX","startY","startDir","exclude","peacefulTargets","indexOf","skipSad","getBounds","contains","catpetpg","socket","emit","sayHTML","text","encodedText","bubble","bubbleText","display","marginFromLeft","background","say","dismissBubble","txt","wordWrap","wordWrapWidth","breakWords","set","Sprite","from","alpha","parent","removeChild","isHurt","isTag","clearAllActions","diggingFound","f","stage","moving_item_interval","clearInterval","disableAura","activateAura","color","GlowFilter","tag","foodFound","keys","obj","texture","baseTexture","valid","on","eatFinal","foodMoveTick","deltaTime","ticker","add","chew","d","setAnimation","wave","karate","laugh","petOther","target","playAudio","keepAudio","Audio","currentTime","play","audio","changeDanceDir","pause","throwItem","item","peaceful","itemClass","Date","now","dir","pivot","rotation","frameRate","frameDelay","loopTimer","ball","velocity","mass","radius","restitution","rotationIncrease","Cd","rho","A","PI","ag","throwMoveTick","Fx","Fy","ax","ay","explodeAnim","AnimatedSprite","explosionTextures","animationSpeed","loop","onComplete","updatePositions","walkAllowed","positions","turn","sinceLastReport","lineLength","disToMoveX","disToMoveY","round","randomEvent","rand","randomWalk","randomTalk","run","randomX","randomY","r1","r2","r3","r4","val","min","changeTagColor","rename","setLevel","renameClowder","callback","postMessage","call","actualWidth","actualHeight","init","getElementsByTagName","menuItemClicked","onfocus","onblur","onresize","hasOwnProperty","onMessage","request","sender","sendResponse","show","getTime","parameters"],"mappings":"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","file":"public/js/dist/runCat.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./js/browserCat.js\");\n","var catPetSetObject = function(){\n    window.catpet = {};\n    window.catpet.idleTypes = ['idle', 'sad', 'sleep'];\n    window.catpet.songElement = null;\n    window.catpet.loadedImages = {};\n    window.catpet.getURL = function(img){\n        if(typeof chrome != \"undefined\" && chrome.extension)\n            return chrome.extension.getURL(img);\n        else \n            return img\n    };\n    window.catpet.width = 150;\n    window.catpet.height = 125;\n    window.catpet.hitPoisitons = {\n        \"idle\":{\n            \"front\": 30,\n            \"back\": 30,\n            \"top\": 50,\n            \"bottom\": 50\n        },\n        \"walk\":{\n            \"front\": 30,\n            \"back\": 30,\n            \"top\": 50,\n            \"bottom\": 50\n        },\n        \"run\":{\n            \"front\": 30,\n            \"back\": 30,\n            \"top\": 50,\n            \"bottom\": 50\n        },\n        \"lick\":{\n            \"front\": 30,\n            \"back\": 30,\n            \"top\": 50,\n            \"bottom\": 50\n        },\n        \"sleep\":{\n            \"front\": 30,\n            \"back\": 30,\n            \"top\": 50,\n            \"bottom\": 50\n        }\n    }\n    window.catpet.currentBubbleIndex = 1000000010;\n    window.catpet.preload = function(arr) {\n        for (var i = 0; i < arr.length; i++) {\n            if(!window.catpet.loadedImages[arr[i]]){\n                window.catpet.loadedImages[arr[i]] = new Image();\n                window.catpet.loadedImages[arr[i]].src = arr[i];\n            }\n        }\n    }    \n    window.catpet.isPlayground = (function(){\n        if(document.getElementById(\"catpet-playground\") || window.isCatpetPlayground)\n            return true;\n        else \n            return false;\n    })();\n    window.catpet.container = (function(){\n        if(document.getElementById(\"catpet-playground\"))\n            return document.getElementById(\"play-area-inner\");\n        else \n            return document.body;\n    })();    \n    // Position is stored here\n    window.catpet[\"external-holder\"] = \"catpet\";\n    window.catpet[\"bubble-holder\"] = \"catpet-bubble\";\n    window.catpet[\"bubble-holder-text\"] = \"catpet-bubble-text\";\n    // Claases of animations stored in pet-holder\n    window.catpet[\"pet-holder\"] = \"catpet_pet\";\n    window.catpet.bubbleWidth = 230;\n    window.catpet.bubbleHeight = 200;\n    window.catpet.isTabActive = true;\n    window.catpet.defaultCatID = \"cat1\";\n    window.catpet.isDebug = null;\n    window.catpet.availableFood = {\n            chicken: {\n                file_name: \"chicken.png\",\n                class_name: \"chicken\"\n            },\n            fish: {\n                file_name: \"fish.png\",\n                class_name: \"fish\"\n            },\n            cheese:{\n                file_name: \"cheese.png\",\n                class_name: \"cheese\"\n            },\n            pizza:{file_name: \"pizza.png\", class_name: \"pizza\"},\n            chocolate:{file_name: \"chocolate.png\", class_name: \"chocolate\"},\n            donut:{file_name: \"donut.png\", class_name: \"donut\"},\n        };\n    // THE DRAG OBJECT WE R CURRENTLY MOVING\n    window.catpet.draggableElement = null;\n    window.catpet.dragPositions = {\n        x_pos: 0, \n        y_pos: 0, // Stores x & y coordinates of the mouse pointer\n        x_elem: 0, \n        y_elem: 0 // Stores top, left values (edge) of the element\n    };\n        \n    window.catpet.log = function(message){\n        if(window.catpet.isDebug == null || window.catpet.isDebug)\n            console.debug(\"Debug:\" + message);\n    };\n    window.catpet.isPetActive = function(catID){\n        catID = catID || window.catpet.defaultCatID;\n        if(window.catpet.activePets[catID])\n            return true;\n        else\n            return false;\n    }\n    window.catpet.menuHTML = \"<div><div id='catpet-menu-header'><b>Meow pet menu</b><hr></div><ul><li id='catpet-hide-30'>Hide for 30 minutes</li><li id='catpet-feed'>Feed</li><li id='catpet-sleep'>Sleep</li><li id='catpet-lick'>Lick</li><li id='catpet-dance'>Dance</li></ul></div>\";        \n    \n    // the object that we insert into ACTIVEPETS\n    window.catpet.Pet = function(){\n        this.browserPetData = {\n            width: 150,\n            height: 125,\n            holderElement: null\n        }\n        this.devTracker = null;\n        this.catIsMine = true;\n        this.isBrowserPet = false;\n        this.lastSnowThrown = 0;\n        this.walkingDots = [];\n        this.walkingInfo = {\n            destinationX: 0,\n            destinationY: 0,\n            speed: 3\n        };\n        this.isDragging = false;\n        this.pingInterval = null;\n        this.currentMovingActionInterval = null; //INTERVAL OF WALKING\n        this.currentAnimationTimeout = null; //TIMEOUT TO RESET LICKING / THROWING \n        this.changeDanceInterval = null;\n        this.animationName = null;\n        this.clearBubbleTimeout = null;\n        this.currentBubble = null;\n        this.startPettingTimeout = null;\n        this.pettingRewardInterval = null;\n        this.rendererContainer = null;\n        this.rendererPet = null;\n        this.scale = 0.24;\n        //this.petControl = new PetControl(window.catpet.container, catPetSettingsLoader);\n        \n        this.stats = {\n            posLeft: null,\n            direction: \"right\",\n            posTop: null,\n            walk: true,\n            talk: true,\n            hideUntil: 0,\n            name: \"\",\n            clowderName: \"\",\n            idleType: \"idle\",\n            level: null,\n            skin: \"grey\",\n            eyes: \"\",\n            hat: \"\"\n        };\n        \n        var _self = this;\n        \n        var distanceBetweenTwoPoints = function(x1, y1, x2, y2) {\n            var a = x1 - x2\n            var b = y1 - y2\n\n            var c = Math.sqrt( a*a + b*b );\n            return c;\n        };\n        \n        var _drag_init = function(e, elem) {\n            _self.isDragging = true;\n            window.catpet.draggableElement = elem;\n            \n            window.catpet.dragPositions.x_pos = document.all ? window.event.clientX : e.pageX;\n            window.catpet.dragPositions.y_pos = document.all ? window.event.clientY : e.pageY;\n            \n            window.catpet.dragPositions.x_elem = window.catpet.dragPositions.x_pos - elem.offsetLeft;\n            window.catpet.dragPositions.y_elem = window.catpet.dragPositions.y_pos - elem.offsetTop;\n        }\n\n        // Will be called when user dragging an element\n        var _move_elem = function (e) {\n            if (window.catpet.draggableElement) {\n                window.catpet.dragPositions.x_pos = document.all ? window.event.clientX : e.pageX;\n                window.catpet.dragPositions.y_pos = document.all ? window.event.clientY : e.pageY;\n                var elem = window.catpet.draggableElement;\n                elem.style.left = (window.catpet.dragPositions.x_pos - window.catpet.dragPositions.x_elem) + 'px';\n                elem.style.top = (window.catpet.dragPositions.y_pos - window.catpet.dragPositions.y_elem) + 'px';\n            }\n        }\n        \n        var setDraggable = function(){\n            //return;\n            // Bind the functions...\n            document.getElementById(window.catpet[\"external-holder\"] +_self.id).onmousedown = function (e) {\n                if(e.which == 1){\n                    _self.idle({initiator: \"Set drag\"});\n                    _drag_init(e, this);\n                }\n                window.catpet.killMeowContextMenu();\n                e.preventDefault();\n                return false;\n            };\n          \n            document.onmousemove = _move_elem;\n        }\n        \n        this.blink = function(){\n            if(!_self.rendererPet)\n                return false;\n            if(_self.stats.idleType != \"idle\" || _self.animationName != \"idle\"){\n                return false;\n            }\n            _self.changeAnimation(0, \"blink\", true, 0);\n            _self.addAnimation(0, 'idle', true, 0);\n        }\n        this.blinkRandom = function(){\n            var num = Math.ceil(Math.random() * 3);\n            if(num === 1)\n                _self.blink();\n                \n            \n            setTimeout(_self.blinkRandom, 2500 + (Math.ceil(Math.random() * 1000)));\n        }\n        this.initiate = function(data){\n            // If we uninstalled, remove from the active browser\n            if(!window.catpet.isPlayground){\n                _self.pingInterval = setInterval(function(){\n                    try{\n                        chrome.runtime.sendMessage({method: \"PING\"}, function(response) {\n                    });\n                    } catch(e){\n                        _self.kill();\n                    }                    \n                }, 3000);\n            }\n            \n            setTimeout(function(){\n                _self.blinkRandom();\n            }, 2500 + (Math.ceil(Math.random() * 1000)));\n            \n            \n            if(!data){\n                data = {\n                    catID: \"\"\n                }\n            }\n            if(data.uid)\n                this.uid = data.uid;\n                \n            if(data.userID)\n                this.userID = data.userID;\n                \n            this.isBrowserPet = data.browserPet || false;\n            this.id = data.catID;\n            if(!isNaN(data.locationX) && !isNaN(data.locationY)){\n                _self.stats.posLeft = data.locationX;\n                _self.stats.posTop = data.locationY;\n            }\n            if(data.direction){\n                _self.stats.direction = data.direction.toLowerCase();\n            }\n            if(data.clowderName)\n                this.stats.clowderName = data.clowderName;\n            if(data.name)\n                this.stats.name = data.name;\n            if (data.skin) {\n                this.stats.skin = data.skin;\n                if (this.stats.skin == \"grey\" || this.stats.skin == \"default\")\n                    this.stats.skin = \"meow\";\n                if (this.stats.skin == \"black\")\n                    this.stats.skin = \"blacky\";\n                else if (this.stats.skin == \"dog\")\n                    this.stats.skin = \"howie\";\n                else if (this.stats.skin == \"ginger\")\n                    this.stats.skin = \"tigri\";\n                else if (this.stats.skin == \"white\")\n                    this.stats.skin = \"milky\";\n                else if (this.stats.skin == \"siames\")\n                    this.stats.skin = \"choco\";\n            }\n            if(data.eyes)\n                this.stats.eyes = data.eyes;\n            if(data.hat)\n                this.stats.hat = data.hat;\n            if(data.level)\n                this.stats.level = data.level;                \n            if(data.userType)\n                this.stats.userType = data.userType;\n            if(data.tagColor){\n                this.stats.tagColor = data.tagColor;\n                if(this.stats.tagColor == \"purple\")\n                    this.stats.tagColor = \"#c569d0\";\n                if(this.stats.tagColor == \"red\")\n                    this.stats.tagColor = \"#b22222\";\n                    \n            }\n            if(typeof data.catIsMine != \"undefined\")\n                this.catIsMine = data.catIsMine;\n            //data {isPlayground : false}\n            //window.catpet.log(\"initiate request\");\n            this.draw();\n            this.setEvents();\n            // DO NOT SET IDLETYPE IF WE R IN PG, OTHERWISE IT WILL ALWAYS KEEP SLEEPING\n            // REGULAT PET LOADING DATA FROM LOCALSTORAGE, SO THIS SETTING COMES ONLY FROM PG\n            //** TODO: NOW WE CAN SET idleType for idle()\n            if(data.idleType && data.idleType == \"sleep\"){\n                _self.sleep();\n            } else if(data.idleType && data.idleType == \"sad\"){\n                _self.sad();\n            } else if(data.idleType && data.idleType == \"dig\"){\n                _self.dig();\n            }\n\n            \n            if(!window.catpet.isPlayground){\n                window.catpet.preload([\n                    window.catpet.getURL('/images/icons/coin.png'),\n                    window.catpet.getURL('/images/icons/chicken.png'),\n                    window.catpet.getURL('/images/icons/fish.png'),\n                ]);                \n            }\n\n        },\n        \n        this.sendPositionsToBG = function(){\n            window.catpet.sendToBackground(\"updatePositions\", {posLeft: _self.stats.posLeft, posTop: _self.stats.posTop, initiator: \"draw\"}, function(response) {\n                \n            });\n        },\n        \n        this.changeSkin = function(skinName, empty){\n            if(skinName == \"grey\" || skinName == \"default\")\n                skinName = \"meow\";\n            if(skinName == \"black\")\n                skinName = \"blacky\";\n            else if(skinName == \"dog\")\n                skinName = \"howie\";\n            else if(skinName == \"ginger\")\n                skinName = \"tigri\";\n            else if(skinName == \"white\")\n                skinName = \"milky\";\n            else if(skinName == \"siames\")\n                skinName = \"choco\";\n            \n            if(!window.RenderManager.resources.cat.spineData.findSkin(\"skins/\"+skinName))\n                skinName = \"meow\";\n            \n            _self.stats.skin = skinName;\n            \n            if((this.stats.eyes) && !empty){\n                var variation = \"v1\"\n                if(skinName == \"tigri\" || skinName == \"husky\" || skinName == \"howie\" || skinName == \"choco\"){\n                    variation = \"v2\";\n                }\n                    \n                var skin = new PIXI.spine.core.Skin(this.uid || this.id);\n                var skinParent = window.RenderManager.resources.cat.spineData.findSkin(\"skins/\"+skinName);\n                var eyesIndex = window.RenderManager.resources.cat.spineData.findSlot(\"Eyes\").index;\n                var hatIndex = window.RenderManager.resources.cat.spineData.findSlot(\"Hat\").index;\n                for(var idx = 0; idx < skinParent.attachments.length; idx++){\n                    var tst = Object.assign(true, {}, skinParent.attachments[idx])\n                    if(idx == eyesIndex){\n                        var openEyesRegion = window.RenderManager.resources.cat.spineAtlas.findRegion(\"eyes/\"+this.stats.eyes+\"/\"+variation+\"/open\");\n                        if(openEyesRegion){\n                            var newRegion = new PIXI.spine.core.RegionAttachment(openEyesRegion.name)\n                            newRegion = Object.assign(newRegion, tst.Open);\n                            newRegion.setRegion(openEyesRegion);\n                            tst.Open = newRegion;\n                        }\n                        var sadEyesRegion = window.RenderManager.resources.cat.spineAtlas.findRegion(\"eyes/\"+this.stats.eyes+\"/\"+variation+\"/sad\");\n                        if(sadEyesRegion){\n                            var newRegion = new PIXI.spine.core.RegionAttachment(sadEyesRegion.name)\n                            newRegion = Object.assign(newRegion, tst.Sad);\n                            newRegion.setRegion(sadEyesRegion);\n                            tst.Sad = newRegion;\n                        }\n                        var tiredEyesRegion = window.RenderManager.resources.cat.spineAtlas.findRegion(\"eyes/\"+this.stats.eyes+\"/\"+variation+\"/tired\");\n                        if(tiredEyesRegion){\n                            var newRegion = new PIXI.spine.core.RegionAttachment(tiredEyesRegion.name)\n                            newRegion = Object.assign(newRegion, tst.Tired);\n                            newRegion.setRegion(tiredEyesRegion);\n                            tst.Tired = newRegion;\n                        }\n                         \n                    } else if(_self.stats.hat && idx == hatIndex){\n                        /*\n                        var hat = window.RenderManager.resources.cat.spineAtlas.findRegion(\"hats/\"+_self.stats.hat);\n                        if(hat) {\n                            var newRegion = new PIXI.spine.core.RegionAttachment(hat.name)\n                            newRegion = Object.assign(newRegion, tst.Hat);\n                            newRegion.setRegion(hat);\n                            tst.Hat = newRegion;\n                            //_self.rendererPet.skeleton.setAttachment(\"Hat\", _self.stats.hat);\n                            _self.rendererPet.skeleton.setAttachment(\"Ear Left\", null);\n                            _self.rendererPet.skeleton.setAttachment(\"Ear Right\", null);\n                        }\n                        */\n                    }\n\n                    skin.attachments.push(tst)\n                }\n                \n                _self.rendererPet.skeleton.setSkin(skin);               \n                _self.rendererPet.skeleton.setToSetupPose();\n                _self.rendererPet.update(0);\n            }\n            else {\n                _self.rendererPet.skeleton.setSkinByName(\"skins/\"+skinName);\n                _self.rendererPet.skeleton.setToSetupPose();\n                _self.rendererPet.update(0);\n            }\n            \n            if(_self.stats.hat && _self.rendererPet.skeleton.getAttachmentByName(\"Hat\", _self.stats.hat)) {\n                _self.rendererPet.skeleton.setAttachment(\"Hat\", _self.stats.hat);\n                if(_self.stats.hat != \"hat1\" && _self.stats.hat != \"hat2\" && _self.stats.hat != \"hat22\" && _self.stats.hat != \"hat23\" && _self.stats.hat != \"hat24\")\n                    _self.rendererPet.skeleton.setAttachment(\"Ear Left\", null);\n                if(_self.stats.hat != \"hat22\" && _self.stats.hat != \"hat23\" && _self.stats.hat != \"hat24\")\n                    _self.rendererPet.skeleton.setAttachment(\"Ear Right\", null);\n                if(_self.stats.hat && _self.rendererPet.skeleton.getAttachmentByName(\"Hat-Back\", _self.stats.hat)) {\n                    _self.rendererPet.skeleton.setAttachment(\"Hat-Back\", _self.stats.hat);\n                }\n            }\n                        \n            var el = document.getElementById(\"pet-external-\" + _self.id);\n            if(el)\n                el.className = \"pet-external \" + _self.stats.skin;\n        };\n        \n        this.draw = function(){\n            \n            var fromTop = this.stats.posTop != null ? this.stats.posTop : Math.floor((Math.random() * (window.catpet.viewport().height + window.catpet.height / 2)) + 1);\n            var fromLeft =  this.stats.posLeft != null ? this.stats.posLeft : Math.floor((Math.random() * (window.catpet.viewport().width - window.catpet.width)) + 1);           \n            \n            if(!this.stats.posTop || !this.stats.posLeft){\n                // IT IS NULL IF WE RECEIVED NO UPDATED OBJECT FROM BG (IF WE IN PLAYGROUND) SO LETS SET THE VALUES\n                this.stats.posTop = fromTop;\n                this.stats.posLeft = fromLeft;\n                this.sendPositionsToBG();\n            }\n            \n            var custumData = Object.assign(true, {}, RenderManager.resources.cat.spineData);\n            let cat = new PIXI.spine.Spine(RenderManager.resources.cat.spineData);\n            cat.filters = [\n                //new PixelateFilter(5),\n                //new ReflectionFilter(),\n                //new AsciiFilter(14),\n                //new GlowFilter(10, 2, 1, 0xffffff, 0.2),\n                //new GlowFilter(15, 2, 1, 0xFF0000, 0.5)\n            ];\n            // From Idle to All others ->\n            var actionsTop = [\"idle\", \"walk\", \"run\", \"dance\", \"dance-rock\", \"dance-tap\", \"throw\", \"bite\", \"chew\" ,\"blink\", \"wave\", \"hurt\", \"laugh\", \"karate\"];\n            var actionsHalf = [\"sad\"];\n            var actionsDown = [\"sleep\",\"lick\", \"dig\"];\n            \n            for(var actionIDX in actionsTop){\n                for (let i in actionsTop){\n                    cat.stateData.setMix(actionsTop[actionIDX], actionsTop[i] , 0.2);\n                }\n                for (let i in actionsHalf){\n                    cat.stateData.setMix(actionsTop[actionIDX], actionsHalf[i] , 0.2);\n                }\n                for (let i in actionsDown){\n                    cat.stateData.setMix(actionsTop[actionIDX], actionsDown[i] , 0.4);\n                }\n            }\n            for(var actionIDX in actionsHalf){\n                for (let i in actionsTop){\n                    cat.stateData.setMix(actionsHalf[actionIDX], actionsTop[i] , 0.2);\n                }\n                for (let i in actionsHalf){\n                    cat.stateData.setMix(actionsHalf[actionIDX], actionsHalf[i] , 0.2);\n                }\n                for (let i in actionsDown){\n                    cat.stateData.setMix(actionsHalf[actionIDX], actionsDown[i] , 0.2);\n                }\n            }\n            for(var actionIDX in actionsDown){\n                for (let i in actionsTop){\n                    cat.stateData.setMix(actionsDown[actionIDX], actionsTop[i] , 0.4);\n                }\n                for (let i in actionsHalf){\n                    cat.stateData.setMix(actionsDown[actionIDX], actionsHalf[i] , 0.3);\n                }\n                for (let i in actionsDown){\n                    cat.stateData.setMix(actionsDown[actionIDX], actionsDown[i] , 0.4);\n                }\n            }\n\n            cat.state.addListener({\n                event: function(entry, event) {\n                    //console.log('event fired '+event.data+' at track' + entry.trackIndex)\n                },\n                complete: function(entry) {\n                    //console.log('track '+entry.trackIndex+' completed '+entry.loopsCount()+' times')\n                },\n                start: function(entry) {\n                    //console.log('animation is set ',entry.animation.name)\n                    _self.animationName = entry.animation.name;\n                },\n                end: function(entry) {\n                    //console.log('animation was ended at '+entry.trackIndex)\n                },\n                dispose: function(entry) {\n                    //console.log('animation was disposed at '+entry.trackIndex)\n                },\n                interrupted: function(entry) {\n                    //console.log('animation was interrupted at '+entry.trackIndex)\n                }\n            });\n            //cat.skeleton.setSkinByName(\"brown-eyes\");\n            \n\n\n            if(_self.stats.direction == \"left\")\n                cat.scale.x = -this.scale;\n            else\n                cat.scale.x = this.scale;\n                \n            cat.scale.y = this.scale;\n            cat.autoUpdate = true;\n            cat.interactive = true;\n\n            // create a container for the spine animation and add the animation to it\n            var catContainer = new PIXI.Container();\n            catContainer.parentLayer = window.RenderManager.layer;\n            catContainer.zOrder = ++window.RenderManager.currzIndex;\n            //catContainer.zOrder = catContainer.zIndex;\n            //_self.organizezIndex(); \n           \n           \n            var bottomContainer = new PIXI.Container();\n            catContainer.addChild(cat);\n            var catName = new PIXI.Text(this.stats.name, this.tagStyle());\n            catName.anchor.x = (0.5);\n            catName.y = 5;\n            \n            var catLevel = new PIXI.Text(this.stats.level + \" |\",{\n                fontSize:13,\n                fill: \"#732a2a\",\n                align: 'right',\n                fontFamily : 'Arial',\n                fontWeight: 'bold'\n            });\n            catLevel.x = - 4 - (catName.width / 2);\n            catLevel.y = 5;\n            //catLevel.resolution = 4;\n            catLevel.anchor.x = (1);\n            \n            var catClowder = new PIXI.Text(this.stats.clowderName,{\n                fontSize:12,\n                //font: \"12px sans-serif\",\n                fill: \"#000\",\n                fillGradientType: 1,\n                fontWeight: 'bold',\n                align: 'center',\n            });\n            catClowder.anchor.x = (0.5);\n            catClowder.y = 20;\n            \n            bottomContainer.addChild(catName, catLevel, catClowder);\n            bottomContainer.x = 10;\n            //bottomContainer.position.x = Math.abs(cat.width / 2) - (bottomContainer.width /2);\n            \n            if(!_self.isBrowserPet)\n                catContainer.addChild(bottomContainer);\n            \n            _self.rendererContainer = catContainer;\n            _self.rendererPet = cat;\n            _self.rendererLevel = catLevel;\n            _self.rendererName = catName;\n            _self.rendererClowder = catClowder;\n            _self.changeSkin(this.stats.skin, false);\n            \n            \n            \n            /*var pet = document.createElement(\"div\");\n            pet.id = \"pet-external-\"+_self.id;\n            pet.className = \"pet-external\";\n            pet.style.width = \"130.75px\";\n            pet.style.height = \"140px\";\n            pet.innerHTML = petHTML;\n            */\n            \n            \n            // Create container if we're not in the playground\n            if(!window.catpet.isPlayground){\n                let x = document.createElement(\"div\");\n                x.id = window.catpet[\"external-holder\"] + _self.id;\n                if(window.catpet.isPlayground)\n                    x.style = \"position:absolute;top:\"+positionTop+\";left:\"+positionLeft+\";\";\n                else\n                    x.style = \"z-index:99999;position:fixed;top:\"+_self.stats.posTop+\"px;left:\"+_self.stats.posLeft+\"px;\";\n                //x.innerHTML = bubbleHTML;\n                RenderManager.pgWorld.view.id = window.catpet[\"pet-holder\"] + _self.id;\n                var bubbleHTML = \"<div class='catpet-bubble' id='\"+window.catpet[\"bubble-holder\"]+ _self.id+\"'><div class='catpet-bubble-text' id='\"+window.catpet[\"bubble-holder-text\"] + _self.id+\"'></div></div>\"                \n                x.innerHTML = bubbleHTML;\n                x.appendChild(RenderManager.pgWorld.view);\n                x.className = \"catpet\"\n                \n                window.catpet.container.appendChild(x);\n                this.browserPetData.holderElement = x;\n            }\n            \n            _self.reposition(true, false, false);  // changeHTML, updateBG, reportToServer\n                                                     \n            // measure the spine animation and position it inside its container to align it to the origin\n            //var localRect = cat.getLocalBounds();\n            \n            \n            // add the container to the stage\n            //RenderManager.pgWorld.stage.addChild(catContainer);\n            RenderManager.containers.pets.addChild(catContainer);\n            \n            \n            //RenderManager.pgWorld.stage.updateLayersOrder();\n            //console.log(cat.getBounds());\n            \n            /*\n            \n            console.log(cat.skeleton);\n            console.log(cat.skeleton.findSlot(\"box-head\"));\n            console.log(cat.skeleton.findSlot(\"box-head\").attachment.vertices);\n            */\n            //var x = new PIXI.spine.SkeletonBounds();\n            //console.log(cat);\n            //catContainer.hitArea = new PIXI.Rectangle(0, 0, 1000, 1000);\n\n            // once position and scaled, set the animation to play\n            //_self.changeAnimation(0, 'idle', true, 0);\n            _self.idle({initiator: \"draw\"});\n            \n            \n            //this.organizezIndex();\n            \n            \n        };\n        \n        this.tagStyle = function(){\n            return {\n                fontSize:12,\n                fill: _self.stats.tagColor == \"rainbow\" ? [\"#b22222\",\"orange\",\"#f6c802\",\"green\",\"#061dbf\",\"#c569d0\",\"violet\" ] : _self.stats.tagColor,\n                fillGradientType: 1,\n                align:\"right\",\n                fontWeight: 'bold'\n            }\n        };\n        \n        this.contextMenuToggle = function(event, action, type){\n            var contextWidth = 220;\n            var contextHeight = (4 * 30) + 50;\n            if(type == \"pg-self\"){\n                contextWidth = 200;\n                contextHeight = (5 * 30) + 50;   \n            }\n            var x = document.getElementById(\"catpet-menu\");\n            if(x)\n                x.remove();   \n            \n            \n            if(action != \"close\"){\n                var leftPos = event.clientX;\n                var topPos = event.clientY;\n                if(window.catpet.viewport().width - event.clientX < contextWidth){\n                    leftPos = leftPos - contextWidth;\n                }\n                \n                if(window.catpet.viewport().height - event.clientY < contextHeight){\n                    topPos = topPos - contextHeight;\n                }\n                \n                x = document.createElement(\"div\");\n                x.id = \"catpet-menu\";                \n                x.style = \"position:fixed;top:\"+topPos+\"px;left:\"+leftPos+\"px;z-index:1500000010\";\n                if(type == \"pg-self\") {\n                    //x.innerHTML = window.catpet.menuHTMLPGSelf;\n                }\n                else{\n                    x.innerHTML = window.catpet.menuHTML;\n                    document.body.appendChild(x);\n                }\n                \n                \n                \n                \n                if(type == \"pg-self\") {\n                     \n                }\n                else {\n                    document.getElementById(\"catpet-hide-30\").addEventListener(\"click\", function(){\n                        window.catpet.killMeowContextMenu();\n                        //_self.contextMenuToggle(this, \"close\");\n                        window.catpet.sendToBackground(\"hide-30-min\", {}, function(response) { \n                        });                \n                    });\n                    document.getElementById(\"catpet-feed\").addEventListener(\"click\", function(){\n                        window.catpet.killMeowContextMenu();\n                        //_self.contextMenuToggle(this, \"close\");\n                        window.catpet.activePets[_self.id].eat();\n                    });\n                    document.getElementById(\"catpet-sleep\").addEventListener(\"click\", function(){\n                        window.catpet.killMeowContextMenu();\n                        //_self.contextMenuToggle(this, \"close\");\n                        window.catpet.sendToBackground(\"put-to-sleep\");\n                        \n                    });\n                    document.getElementById(\"catpet-dance\").addEventListener(\"click\", function(){\n                        window.catpet.killMeowContextMenu();\n                        window.catpet.activePets[_self.id].dance(true);\n                    });\n                    document.getElementById(\"catpet-lick\").addEventListener(\"click\", function(){\n                        window.catpet.killMeowContextMenu();\n                        window.catpet.activePets[_self.id].lick();\n                    });                    \n                }                \n                //window.catpet.log(\"Menu Toggle\");\n            }\n            \n        };\n        \n        this.redrawPet = function(){\n            _self.hide();\n            _self.draw();\n            _self.setEvents(true);\n        };\n        \n        this.setEvents = function(petOnly){\n            if(!window.catpet.isPlayground){\n                // SET DRAGGING EVENTS\n                setDraggable();\n                \n                // ON MOUSE OVER - PETTING \n                document.getElementById(window.catpet[\"pet-holder\"] + _self.id).addEventListener(\"mouseover\", function (e) {\n                    _self.startPettingTimeout = setTimeout(function(){\n                        _self.pet();\n                    }, 1500);\n                });\n                \n                document.getElementById(window.catpet[\"pet-holder\"] + _self.id).addEventListener(\"mouseout\", function (e) {\n                    if(_self.startPettingTimeout){\n                        clearTimeout(_self.startPettingTimeout);\n                        _self.startPettingTimeout = null;\n                    }\n                    if(_self.animationName == \"petting\"){\n                        _self.idle({initiator: \"Petting done\"});\n                    }\n                    \n                });\n            }\n            \n            if(!petOnly && !window.catpet.isPlayground){         \n                // In same cases though, site will stop bubbling and won't allow me to stop default behaviour\n                // Biggest example is gmail, so here we listen to everything and we use Capture option instead of Bubbling\n                // And then we check if it should be disabled based on what we clicked;\n                document.addEventListener('contextmenu', e => {\n                    var prevent = false;\n                    for(var i = 0; i < e.path.length; i++){\n                        if(e.path[i].id == window.catpet[\"external-holder\"] + _self.id || e.path[i].id == window.catpet[\"bubble-holder\"] + _self.id || e.path[i].id == \"catpet-menu\"){\n                            prevent = true;\n                            break;\n                        }\n                    }\n                    if(prevent){\n                        e.preventDefault()\n                    }\n                }, true);\n                \n               \n                \n            }\n            // ON MOUSE DOWN - OPEN CONTEXT MENU\n            if(!window.catpet.isPlayground){\n                document.getElementById(window.catpet[\"pet-holder\"] + _self.id).addEventListener(\"mouseup\", function (e) {\n                    if (e.which == 3){\n                        _self.contextMenuToggle(e);\n                        e.preventDefault();\n                        e.stopPropagation();\n                        return false;\n                    } else {\n                        window.catpet.killMeowContextMenu();\n                    }\n                });\n                // FOR MOST SITES, THIS IS ENOUGH, IT WILL STOP THE DEFAULT BEHAVIOUR\n                document.getElementById(window.catpet[\"pet-holder\"] + _self.id).addEventListener('contextmenu', e => {e.preventDefault()});\n            }\n            \n        }\n        \n        this.loadDataFromLocalStorage = function(data){\n            //window.catpet.log(\"loading data \", data);\n            try{\n                this.stats.posLeft = data.posLeft;\n                this.stats.posTop = data.posTop;\n                this.stats.hideUntil = data.hideUntil;\n                this.stats.walk = data.walk;\n                if((typeof data.walkType == \"undefined\" && typeof data.walk != \"undefined\" && data.walk == true) || data.walkType == \"WALK\")\n                    this.stats.walkType = \"WALK\";\n                else if ((data.walkType == \"EDGES\" || data.walkType == \"BOTTOM\"))\n                    this.stats.walkType = data.walkType;\n                else\n                    this.stats.walkType = \"FALSE\";\n                \n                if(this.stats.walkType == \"BOTTOM\")\n                    this.stats.posTop = window.catpet.viewport().height;\n                this.stats.talk = data.talk;\n                if(data.idleType)\n                    this.stats.idleType = data.idleType;\n                if(data.skin)\n                    this.stats.skin = data.skin;\n                if(data.hat)\n                    this.stats.hat = data.hat;\n                if(data.eyes)\n                    this.stats.eyes = data.eyes;\n            } catch(e){\n                window.catpet.log(\"Failed loading data\", e);\n            }\n        };\n        \n        this.drawPositions = function(){\n            //console.log(\"Draw position\", this.stats.posLeft, this.stats.posTop);\n            if(window.catpet.isPlayground){\n                _self.rendererContainer.position.x = this.stats.posLeft;\n                _self.rendererContainer.position.y = this.stats.posTop;\n                if(this.catIsMine){\n                    //window.RenderManager.pgWorld.stage.pivot.copy(_self.rendererContainer.positions);\n                    //window.RenderManager.pgWorld.stage.position.set(_self.rendererContainer.position.x, _self.rendererContainer.position.y/2);﻿\n                }\n            } else {\n                _self.rendererContainer.position.x = this.browserPetData.width / 2;\n                _self.rendererContainer.position.y = this.browserPetData.height;\n                //document.getElementById(window.catpet[\"external-holder\"] + _self.id).style.left = (this.stats.posLeft - (this.browserPetData.width / 2)) + \"px\";\n                this.browserPetData.holderElement.style.left = (this.stats.posLeft - (this.browserPetData.width / 2)) + \"px\";\n                //document.getElementById(window.catpet[\"external-holder\"] + _self.id).style.top  = (this.stats.posTop - this.browserPetData.height) + \"px\";\n                this.browserPetData.holderElement.style.top  = (this.stats.posTop - this.browserPetData.height) + \"px\";\n            }\n        }\n        this.fixPositions = function(returnValues, data){\n            if(!returnValues){\n                data  = {\n                    x: this.stats.posLeft,\n                    y: this.stats.posTop\n                }\n            }\n            \n            // too much right side\n            if(window.catpet.viewport().width < (data.x + Math.abs(_self.rendererPet.width / 2))){\n                data.x = window.catpet.viewport().width - Math.abs(_self.rendererPet.width / 2);\n            }\n            // too much left side\n            else if(data.x - Math.abs(_self.rendererPet.width / 2) < 0){\n                data.x = Math.abs(_self.rendererPet.width / 2);\n            }\n            \n            // too high\n            if(data.y - (_self.rendererPet.height) < 0){\n                data.y = (_self.rendererPet.height);\n            }\n            // too low\n            else if(window.catpet.viewport().height < (data.y ) ){\n                data.y = window.catpet.viewport().height;\n            }\n            else if(_self.stats.walkType == \"BOTTOM\"){\n                 data.y = window.catpet.viewport().height;\n            }\n            else if(_self.stats.walkType == \"EDGES\" \n            && _self.stats.posTop > this.browserPetData.height // not stick to top\n            && _self.stats.posTop < window.catpet.viewport().height // not stick to bottom\n            && _self.stats.posLeft > (this.browserPetData.width/2) // not stick to left\n            && _self.stats.posLeft < window.catpet.viewport().width - (this.browserPetData.width/2) // not stick to right\n            ){\n                 data.y = window.catpet.viewport().height;\n            }\n            \n            if(returnValues){\n                return data;\n            } else {\n                this.stats.posLeft = data.x;\n                this.stats.posTop = data.y;\n            }\n        }\n                        \n        this.reposition = function(changeHTML, updateBG, reportToServer){\n            if(typeof reportToServer === \"undefined\")\n                reportToServer = false;\n                \n            if(!_self.rendererPet)\n                return;\n                \n            if(this.currentMovingActionInterval)\n                _self.idle({\n                    report: reportToServer\n                });\n            \n            this.fixPositions();            \n            \n            if(changeHTML && window.catpet && window.catpet.isPetActive(_self.id)){\n                if(_self.rendererPet){\n                    _self.drawPositions();\n                }\n            }\n            \n            if(updateBG && !window.catpet.isPlayground){\n                _self.sendPositionsToBG();\n            }\n        };\n        \n        this.didItemHitCat = function(data){\n            var result = {\n                id: null,\n                dist: 0\n            };\n                \n                data.x = parseInt(data.x);\n                //data.x +=12;\n                //data.y = parseInt(data.y) + 12;\n                data.startX = parseInt(data.startX);\n                data.startY = parseInt(data.startY);\n                data.startDir = (data.startDir);\n                //console.log(data);            \n            for(var x in window.catpet.activePets){\n                if(x == data.exclude)\n                    continue;\n                if(data.peacefulTargets && data.peacefulTargets.indexOf(x) > -1)\n                    continue;\n                \n                if(data.skipSad && (window.catpet.activePets[x].stats.idleType == \"sad\" || window.catpet.activePets[x].animationName == \"hurt\"))\n                    continue;\n                    \n\n                if(data.startX > window.catpet.activePets[x].stats.posLeft + 30 && data.startDir == \"right\")// && data.startX - window.catpet.activePets[x].stats.posLeft > 100)\n                    continue; \n                else if(data.startX < window.catpet.activePets[x].stats.posLeft - 30 && data.startDir == \"left\")// && data.startX - window.catpet.activePets[x].stats.posLeft > 100)\n                    continue;\n                    \n                /*     \n                var skeleton = new PIXI.spine.core.Skeleton(window.catpet.activePets[x].rendererPet.stateData.skeletonData);\n                var bounds = new PIXI.spine.core.SkeletonBounds();\n                bounds.update(skeleton,true);\n                var px = window.catpet.activePets[x].rendererContainer.x;\n                var py = window.catpet.activePets[x].rendererContainer.y;\n\n                let rx = (data.x - px) * 4.16;\n                let ry = (data.y - py) * 4.16;\n               \n                rx = rx + ((bounds.maxX + bounds.minX) / 2);\n                ry = ry + ((bounds.maxY));\n                //console.log(bounds, ry, window.catpet.activePets[x].rendererPet.height) \n                */\n                \n                \n                // WORKING SIMPLE \n                var b = window.catpet.activePets[x].rendererPet.getBounds()\n                if(b.contains(data.x, data.y)){\n               \n               /* \n                if(bounds.containsPoint(rx, ry)){\n                    console.log(bounds.containsPoint(rx, ry))\n                    \n                    \n                /*\n                // OLD WAY - WORSE THAN getBounds on sprite object\n                if(\n                    x != data.exclude &&\n                    window.catpet.activePets[x].stats.posLeft - Math.abs(_self.rendererPet.width /2) < data.x &&\n                    window.catpet.activePets[x].stats.posLeft + Math.abs(_self.rendererPet.width /2) > data.x &&\n                    window.catpet.activePets[x].stats.posTop - Math.abs(_self.rendererPet.height /2) + 10 < data.y &&\n                    window.catpet.activePets[x].stats.posTop + Math.abs(_self.rendererPet.height /2) > data.y \n                ) {\n                */\n                //if(dist < 50 && (dist < result.dist || result.id == null) && x != data.exclude){\n                    result = {\n                        id: x\n                    };\n                }\n            }\n            if(result.id != null){\n                // This happens when the hitter sending event\n                if(_self.catIsMine)\n                    window.catpetpg.socket.emit(\"hit\", {\"id\": result.id});\n                \n                return true;\n            }\n            else \n                return false;\n        };\n        \n        \n        this.sayHTML = function(text, encodedText){ \n            var bubble = document.getElementById(window.catpet[\"bubble-holder\"]+_self.id);\n            var bubbleText = document.getElementById(window.catpet[\"bubble-holder-text\"]+_self.id);\n            if(!bubble || !bubbleText){\n                return;\n            }\n            bubble.style[\"z-index\"] = window.catpet.currentBubbleIndex++;\n            //document.getElementById(window.catpet[\"external-holder\"] + _self.id).style[\"z-index\"] = window.catpet.currentBubbleIndex;\n            bubble.style.display = \"flex\";\n            \n            let marginFromLeft = 105;\n            \n            bubble.style.left = marginFromLeft + \"px\";\n            bubble.style.top = -140 + \"px\";\n            \n            bubble.style.background = \"url(\"+window.catpet.getURL('/images/bubble.svg')+\")\";\n            bubble.className = \"catpet-bubble\";\n            \n            // Left? //\n            if(window.catpet.viewport().width - window.catpet.bubbleWidth - marginFromLeft <= this.stats.posLeft - (this.browserPetData.width / 2)\n            && window.catpet.bubbleHeight -70 <= this.stats.posTop - (this.browserPetData.height)\n            ){\n                bubble.className = \"catpet-bubble l\";\n                bubble.style.background = \"url(\"+window.catpet.getURL('/images/bubble-l.svg')+\")\";\n                bubble.style.left = (-window.catpet.bubbleWidth + 10) + \"px\";\n                bubble.style.top = -140 + \"px\";                \n            } \n            // Bottom Left?\n            else if(window.catpet.viewport().width - window.catpet.bubbleWidth - marginFromLeft <= this.stats.posLeft - (this.browserPetData.width / 2)\n                    && window.catpet.bubbleHeight -70 > this.stats.posTop - (this.browserPetData.height)){\n                bubble.className = \"catpet-bubble bl\";\n                bubble.style.background = \"url(\"+window.catpet.getURL('/images/bubble-bl.svg')+\")\";\n                bubble.style.left = (-window.catpet.bubbleWidth + 10) + \"px\";\n                bubble.style.top = 70 + \"px\";\n            } \n            // Bottom right?\n            else if(window.catpet.bubbleHeight - 70 > this.stats.posTop - (this.browserPetData.height)) {\n            //else if(window.catpet.viewport().height - window.catpet.bubbleHeight - 128 <= parseInt(document.getElementById(window.catpet[\"external-holder\"]).style.top)){\n                bubble.className = \"catpet-bubble br\";\n                bubble.style.background = \"url(\"+window.catpet.getURL('/images/bubble-br.svg')+\")\";\n                bubble.style.left = marginFromLeft + \"px\";\n                bubble.style.top = 70 + \"px\";\n            } \n            \n            bubbleText.innerHTML = text;\n            if(this.clearBubbleTimeout){\n                clearTimeout(this.clearBubbleTimeout);\n            }\n            this.clearBubbleTimeout = setTimeout(function(){\n                bubble.style.display = \"none\";\n                //bubbleText.innerHTML = \"\";   \n            }, 5000);\n\n        };\n        \n        \n        this.say = function(text, encodedText){\n            if(!window.catpet.isPlayground){\n                this.sayHTML(text, encodedText);\n                return;\n            }\n            \n            \n            this.dismissBubble();\n            _self.currentBubble =  new PIXI.Container(); \n            _self.currentBubble.parentLayer = window.RenderManager.layer;\n            _self.currentBubble.zOrder = ++window.RenderManager.currzIndex + 10000;\n            //_self.currentBubble.zOrder = _self.currentBubble.zIndex;\n            //_self.rendererContainer.zIndex = ++window.RenderManager.currzIndex;\n            \n            //_self.organizezIndex();\n            \n            \n            var txt = new PIXI.Text(text,{\n                fontSize: 16,\n                fill: \"#000\",\n                align: 'center',\n                fontFamily : 'arial',\n                //fontWeight: 'bold',\n                //strokeThickness: 1,\n                wordWrap: true,\n                wordWrapWidth: window.catpet.bubbleWidth - 30,\n                breakWords: true\n            });\n            //txt.resolution = 4;\n            txt.x = window.catpet.bubbleWidth / 2;\n            txt.y = window.catpet.bubbleHeight / 2 - 20;\n            txt.anchor.set(0.5);            \n            \n            \n            // Left?\n            if(\n            (\n                (window.catpet.viewport().width - window.catpet.bubbleWidth  - 60  <= this.stats.posLeft)\n                ||\n                (_self.stats.direction == \"left\" && (this.stats.posLeft - window.catpet.bubbleWidth  - 60  > 0))\n            )\n            && window.catpet.bubbleHeight  <= this.stats.posTop - _self.rendererContainer.height + 60\n            ){\n                var bubble = PIXI.Sprite.from('/images/bubble-l.png');\n                bubble.width = window.catpet.bubbleWidth;\n                bubble.height = window.catpet.bubbleHeight;\n                \n                _self.currentBubble.y = (-1 * window.catpet.bubbleHeight - _self.rendererContainer.height) + 60;\n                _self.currentBubble.x = -window.catpet.bubbleWidth - 60;                \n            } \n            // Bottom Left?\n            else if(\n                (\n                    (window.catpet.viewport().width - window.catpet.bubbleWidth  - 60  <= this.stats.posLeft)\n                    ||\n                    (_self.stats.direction == \"left\" && (this.stats.posLeft - window.catpet.bubbleWidth  - 60  > 0))\n                )\n                    && window.catpet.bubbleHeight  > this.stats.posTop - _self.rendererContainer.height + 60){\n                var bubble = PIXI.Sprite.from('/images/bubble-bl.png');\n                bubble.width = window.catpet.bubbleWidth;\n                bubble.height = window.catpet.bubbleHeight;\n                _self.currentBubble.y = (-1 * _self.rendererContainer.height) + 70;\n                _self.currentBubble.x = -window.catpet.bubbleWidth - 60;\n                txt.y = window.catpet.bubbleHeight / 2 + 20;\n            } \n            // Bottom right?\n            else if(window.catpet.bubbleHeight > this.stats.posTop - _self.rendererContainer.height + 60) {\n                \n                var bubble = PIXI.Sprite.from('/images/bubble-br.png');\n                bubble.width = window.catpet.bubbleWidth;\n                bubble.height = window.catpet.bubbleHeight;\n                _self.currentBubble.y = (-1 * _self.rendererContainer.height) + 70;\n                _self.currentBubble.x = _self.rendererContainer.width - 60;\n                txt.y = window.catpet.bubbleHeight / 2 + 20;\n            } else {\n                var bubble = PIXI.Sprite.from('/images/bubble.png');\n                bubble.width = window.catpet.bubbleWidth;\n                bubble.height = window.catpet.bubbleHeight;\n                \n                _self.currentBubble.y = (-1 * window.catpet.bubbleHeight - _self.rendererContainer.height) + 60;\n                _self.currentBubble.x = _self.rendererContainer.width - 60;                 \n            }\n            /*\n            bubbleText.innerHTML = text;\n            \n            */\n\n            _self.currentBubble.addChild(bubble, txt);\n            _self.currentBubble.alpha = 0.90;\n            _self.rendererContainer.addChild(_self.currentBubble);\n            // Create tinmeout to clean current bubble\n            this.clearBubbleTimeout = setTimeout(function(){\n                _self.currentBubble.parent.removeChild(_self.currentBubble);\n                _self.clearBubbleTimeout = null;\n                _self.currentBubble = null;\n                //bubble.style.display = \"none\";\n                //bubbleText.innerHTML = \"\";   \n            }, 5000);\n        };\n        \n        this.dismissBubble = function(){\n            // Clean timeout so we can extend the display time\n            if(_self.clearBubbleTimeout){\n                clearTimeout(this.clearBubbleTimeout);\n                _self.clearBubbleTimeout = null;\n            }\n            if(_self.currentBubble){\n                _self.currentBubble.parent.removeChild(_self.currentBubble);\n                _self.currentBubble = null;\n            }\n        };\n        \n        this.isHurt = function(isTag = false){\n            _self.clearAllActions();\n            \n            // This happens when the target already received a response that he got hit, now lets make sure the server stops moving.\n            // This In case we sent a movement before we received the got hit but the server received the got hit first\n            if(_self.catIsMine){\n                \n                window.catpetpg.socket.emit(\"hit_confirm\");\n            }\n                \n            if(window.catpet.isPetActive(_self.id)){\n                \n                if(_self.stats.direction == \"left\")\n                    _self.rendererPet.scale.x = -1 * _self.scale;\n                else\n                    _self.rendererPet.scale.x = _self.scale; \n            }\n            _self.changeAnimation(0, \"hurt\", false, 0);\n            //_self.rendererPet.state.addAnimation(0, \"sad\", false, 0);\n            \n            // Only if we were idle, turn us into sad\n            // If we're in tag, we receive the last hit event AFTER we send event to reset everyone\n            // So if we received TAG right after getting hit, we should not become sad\n            // Therefore, in tag, make us sad only if we are not white skin\n            if(_self.stats.idleType == \"idle\" \n            //&& (!isTag || (isTag && _self.stats.skin != \"white\") )\n            )\n                _self.stats.idleType = \"sad\";\n                \n            _self.currentAnimationTimeout = setTimeout(function(){\n                _self.idle({\n                    type: _self.stats.idleType,\n                    report: (window.catpet.isPlayground && _self.catIsMine)\n                });\n            }, 1500);\n        };        \n        \n        this.pet = function(){\n            if(_self.stats.idleType == \"sleep\") { \n                return;\n            }\n            this.clearAllActions();\n            _self.animationName = \"pet\";\n            \n            if(window.catpet.isPetActive(_self.id)){\n                _self.changeAnimation(0, \"petting\", true, 0);\n            }\n                        \n            _self.pettingRewardInterval = setInterval(function(){\n                window.catpet.sendToBackground(\"petting\")\n            }, 1000);\n            \n        };\n        \n        this.diggingFound = function(data){\n            var f = PIXI.Sprite.from(\"/images/icons/32/\" + data.img);\n            f.width = 24;\n            f.height = 24;\n            f.x = (_self.stats.posLeft);\n            f.y = (_self.stats.posTop - 15);\n            RenderManager.pgWorld.stage.addChild(f);\n            /*\n            var dig_item = document.createElement(\"img\");\n            dig_item.style.position = \"absolute\";\n            dig_item.style.width = \"24px\";\n            dig_item.style.height = \"24px\";\n            dig_item.style[\"z-index\"] = \"100000009\";\n            dig_item.className = \"item\";\n            dig_item.src = \"/images/icons/32/\" + data.img;\n            dig_item.style.left = (_self.stats.posLeft-12) + \"px\";\n            dig_item.style.top = (_self.stats.posTop - 12) + \"px\";\n            window.catpet.container.appendChild(dig_item);\n            */\n            var moving_item_interval = setInterval(function(){\n                f.y--;\n                f.alpha -= 0.01;\n                //dig_item.style.top = (parseInt(dig_item.style.top) -1) + \"px\";\n                //dig_item.style.opacity = (dig_item.style.opacity == \"\" ? 1 : (parseFloat(dig_item.style.opacity)) -0.01);\n            },40);            \n        \n            setTimeout(function(){\n                if(moving_item_interval)\n                    clearInterval(moving_item_interval);\n                if(f && f.parent)\n                    f.parent.removeChild(f);\n            \n            }, 2000);            \n                            \n        };\n         \n        this.disableAura = function(){\n            _self.rendererPet.filters = [];\n        };\n        \n        this.activateAura = function(color){\n            _self.rendererPet.filters = [\n                //new PixelateFilter(5),\n                //new ReflectionFilter(),\n                //new AsciiFilter(14),\n                new GlowFilter(10, 2, 1, color, 0.2),\n                //new GlowFilter(15, 2, 1, 0xFF0000, 0.5)\n            ];\n        };\n        \n        this.eat = function(tag){\n            if(_self.animationName == \"hurt\" || _self.animationName == \"throw\"){\n                return false;\n            }\n            \n            if(this.stats.idleType == \"sleep\") { // IF WE R WALKING, KEEP WALKING\n                //return;\n            }\n            this.clearAllActions();\n            \n            if(window.catpet.isPlayground)\n                _self.stats.idleType = \"idle\";\n                \n            var foodFound = false;\n            for(var i in window.catpet.availableFood){\n                if(i === tag)\n                    foodFound = true;\n            }\n            \n            if(!tag || !foodFound){\n                var keys = Object.keys(window.catpet.availableFood)\n                var obj = window.catpet.availableFood[keys[keys.length * Math.random() << 0]];            \n                tag = obj.class_name;\n            }\n            var f = PIXI.Sprite.from(window.catpet.getURL('/images/food/32/'+tag+'.png'));\n            if (!f.texture.baseTexture.valid) {\n                f.texture.baseTexture.on('loaded', () => {\n                    _self.eatFinal(f);\n                });\n            } else {\n                _self.eatFinal(f);\n            }\n        \n            \n        };\n        \n        this.eatFinal = function(f){\n            if(_self.stats.direction == \"left\"){\n                f.x = ( 0-12 -12);\n            }\n            else{\n                f.x = ( 0-12 +12);\n            }\n            f.y = -42;\n            \n\n            \n            if(f.width < f.height){\n                f.width * 24 * (f.width / f.height);\n                f.height = 24;\n            } else {\n                f.height * 24 * (f.height / f.width);\n                f.width = 24;\n            }\n\n            _self.rendererContainer.addChild(f);\n                \n            var foodMoveTick = function(deltaTime){\n                if(_self.stats.direction == \"left\"){\n                    f.x = ((f.x) + (0.1 * deltaTime)) ;\n                    f.y = ((f.y) - (0.2 * deltaTime)) ;\n                }\n                else {\n                    f.x = ((f.x) - (0.1 * deltaTime)) ;\n                    f.y = ((f.y) - (0.2 * deltaTime)) ;\n                }\n            };\n            window.RenderManager.pgWorld.ticker.add(foodMoveTick);\n\n            setTimeout(function(){\n                f.parent.removeChild(f);\n                window.RenderManager.pgWorld.ticker.remove(foodMoveTick);\n                \n                if(_self.catIsMine){\n                    window.catpet.sendToBackground(\"eat-request\");\n                }\n            }, 500);            \n            \n            if(window.catpet.isPetActive(_self.id)){\n                //document.getElementById(window.catpet[\"pet-holder\"] + _self.id).className = \"bite anim \" + _self.stats.direction;\n                _self.changeAnimation(0, \"bite\", false, 0);\n            }\n            _self.currentAnimationTimeout = setTimeout(function(){\n                _self.chew();\n            }, 1000);\n        }\n        \n        this.chew = function(){\n            this.clearAllActions();\n            \n            if(window.catpet.isPetActive(_self.id)){\n                _self.changeAnimation(0, \"chew\", true, 0);\n            }\n            _self.currentAnimationTimeout = setTimeout(function(){\n                _self.idle({initiator: \"Chew\"});\n            }, 3000);\n        };\n        \n        this.dig = function(){\n            if(_self.animationName == \"hurt\" || _self.animationName == \"throw\"){\n                return false;\n            }\n            \n            this.clearAllActions();\n            if(window.catpet.isPlayground)\n                _self.stats.idleType = \"dig\";\n                \n            if(window.catpet.isPetActive(_self.id)){\n                //document.getElementById(window.catpet[\"pet-holder\"] + _self.id).className = \"anim dig \" + _self.stats.direction;\n                _self.changeAnimation(0, \"dig\", true, 0);\n            }\n            \n            /*\n            _self.currentAnimationTimeout = setTimeout(function(){\n                _self.idle({initiator: \"Dig\", type: \"idle\"});\n            }, 30 * 1000);\n            */\n        };\n\n        this.changeAnimation = function(a,b,c,d){\n            if(_self.rendererPet)\n            _self.rendererPet.state.setAnimation(a,b,c,d)\n            return;         \n        }\n        this.addAnimation = function(a,b,c,d){\n            if(_self.rendererPet)\n            _self.rendererPet.state.addAnimation(a,b,c,d);\n            return;         \n        }\n        this.wave = function(){\n            if(_self.animationName == \"hurt\" || _self.animationName == \"throw\"){\n                return false;\n            }\n            \n            this.clearAllActions();\n            if(window.catpet.isPlayground)\n                _self.stats.idleType = \"idle\";\n                \n            if(window.catpet.isPetActive(_self.id)){\n                //document.getElementById(window.catpet[\"pet-holder\"] + _self.id).className = \"anim lick \" + _self.stats.direction;\n                _self.changeAnimation(0, \"wave\", true, 0);\n                _self.addAnimation(0, 'idle', true, 0);\n                \n            }\n        };\n        this.karate = function(){\n            if(_self.animationName == \"hurt\" || _self.animationName == \"throw\"){\n                return false;\n            }\n\n            this.clearAllActions();\n            if(window.catpet.isPlayground)\n                _self.stats.idleType = \"idle\";\n\n            if(window.catpet.isPetActive(_self.id)){\n                _self.changeAnimation(0, \"karate\", true, 0);\n                _self.addAnimation(0, 'idle', true, 0);\n\n            }\n        };\n        this.laugh = function(){\n            if(_self.animationName == \"hurt\" || _self.animationName == \"throw\"){\n                return false;\n            }\n\n            this.clearAllActions();\n            if(window.catpet.isPlayground)\n                _self.stats.idleType = \"idle\";\n\n            if(window.catpet.isPetActive(_self.id)){\n                _self.changeAnimation(0, \"laugh\", true, 0);\n                _self.addAnimation(0, 'idle', true, 0);\n\n            }\n        };\n        this.lick = function(){\n            if(_self.animationName == \"hurt\" || _self.animationName == \"throw\"){\n                return false;\n            }\n            \n            this.clearAllActions();\n            if(window.catpet.isPlayground)\n                _self.stats.idleType = \"idle\";\n            \n            _self.animationName = \"lick\";    \n            if(window.catpet.isPetActive(_self.id)){\n                _self.changeAnimation(0, \"lick\", true, 0);\n            }\n            _self.currentAnimationTimeout = setTimeout(function(){\n                _self.idle({initiator: \"Lick\"});\n            }, 10000);\n        };\n\n        /*\n        this.organizezIndex = function(){\n            window.RenderManager.pgWorld.stage.updateLayersOrder();\n            //$(window.catpet.container).append($(\"#\" + window.catpet[\"external-holder\"] + _self.id)[0]);\n        }\n        */\n        \n        this.petOther = function(target){\n            if(_self.animationName == \"hurt\" || _self.animationName == \"throw\"){\n                return false;\n            }\n            if(target && window.catpet.activePets[target]){\n                if(\n                    (_self.stats.direction == \"left\" && _self.stats.posLeft < window.catpet.activePets[target].stats.posLeft) ||  \n                    (_self.stats.direction == \"right\" && _self.stats.posLeft > window.catpet.activePets[target].stats.posLeft)\n                )\n                    return \"You're not facing the target direction\";\n                else if (\n                    (window.catpet.activePets[target].stats.posLeft >= _self.stats.posLeft && window.catpet.activePets[target].stats.posLeft - _self.stats.posLeft > 50) ||  \n                    (window.catpet.activePets[target].stats.posLeft < _self.stats.posLeft && _self.stats.posLeft - window.catpet.activePets[target].stats.posLeft > 50)              \n                )\n                    return \"You're too far away\";\n                else if (\n                    (_self.stats.posTop >= window.catpet.activePets[target].stats.posTop &&  _self.stats.posTop - window.catpet.activePets[target].stats.posTop > 30)\n                )\n                    return \"You're too far away\";\n                else if (\n                    (_self.stats.posTop < window.catpet.activePets[target].stats.posTop &&  window.catpet.activePets[target].stats.posTop - _self.stats.posTop > 30)\n                )\n                    return \"You're too far away\";\n                    \n                return true;\n            } else if (target){\n                return false;\n            }\n            \n            this.clearAllActions();\n            this.rendererContainer.zOrder = ++window.RenderManager.currzIndex;\n            //this.rendererContainer.zOrder = this.rendererContainer.zIndex;\n            //this.organizezIndex();\n            \n            if(window.catpet.isPlayground)\n                _self.stats.idleType = \"idle\";\n            \n            _self.animationName = \"petother\";    \n            \n            if(window.catpet.isPetActive(_self.id)){\n                //document.getElementById(window.catpet[\"pet-holder\"] + _self.id).className = \"anim petother \" + _self.stats.direction;\n                _self.changeAnimation(0, \"pet other\", true, 0);\n            }\n            _self.currentAnimationTimeout = setTimeout(function(){\n                _self.idle({initiator: \"pet-other\"});\n            }, 3000);\n        };\n        \n        this.dance = function(playAudio, type){\n            if(typeof type == \"undefined\")\n                type = \"dance\";\n            if(_self.animationName == \"hurt\" || _self.animationName == \"throw\"){\n                return false;\n            }\n\n            this.clearAllActions({\n                keepAudio: true\n            });\n            \n\n            \n            if(window.catpet.isPlayground)\n                _self.stats.idleType = \"idle\";\n            _self.animationName = \"dance\";\n              \n\n            if(_self.stats.direction == \"left\")\n                _self.rendererPet.scale.x = -1 * _self.scale;\n            else\n                _self.rendererPet.scale.x = _self.scale;            \n            _self.changeAnimation(0, type, true, 0);\n            \n            if(playAudio){\n                // Create JS obj if not in PG\n                if(!window.catpet.isPlayground){\n                    if(!window.catpet.songElement){\n                        window.catpet.songElement = new Audio(window.catpet.getURL('/sound/cotton_eyed_joe.mp3'));\n                        window.catpet.songElement.addEventListener('ended', function(){\n                            this.currentTime = 0;\n                            this.play();\n                        }, false);                    \n                    }\n                    window.catpet.songElement.play();\n                \n                }\n                // Play HTML obj if in PG\n                if(window.catpet.isPlayground){\n                    var audio = document.getElementById(\"dance-audio\");\n                    audio.play();\n                }\n            }\n            _self.changeDanceInterval = setInterval(function(){\n                if(type == \"dance\" && _self.animationName == \"dance\"){\n                    _self.changeDanceDir();\n                }\n                if(_self.catIsMine)\n                    window.catpet.sendToBackground(\"dancing\");\n            }, 2000);\n            \n            _self.currentAnimationTimeout = setTimeout(function(){\n                _self.idle({initiator: \"Dance\"});\n                if(window.catpet.songElement){\n                    window.catpet.songElement.currentTime = 0;\n                    window.catpet.songElement.pause();\n                }                \n                if(audio){\n                    audio.pause();\n                    audio.currentTime = 0;\n                }\n            }, 21000);\n        };        \n        this.changeDanceDir = function(){\n            if(_self.stats.direction == \"right\"){\n                _self.rendererPet.scale.x = -1 * _self.scale;\n                _self.stats.direction = \"left\"\n            }\n            else {\n                _self.rendererPet.scale.x = _self.scale;\n                _self.stats.direction = \"right\"\n            }\n            \n        }\n        this.sad = function(){\n            if(_self.animationName == \"hurt\"){\n                return false;\n            }            \n            this.clearAllActions();\n            _self.stats.idleType = \"sad\";\n            \n            if(window.catpet.isPetActive(_self.id)){\n                //document.getElementById(window.catpet[\"pet-holder\"] + _self.id).className = \"anim sad \" + _self.stats.direction;\n                _self.changeAnimation(0, \"sad\", true, 0);\n            }\n            /*_self.currentAnimationTimeout = setTimeout(function(){\n                _self.idle();\n            }, 10 * 60 * 1000);*/\n        };        \n        \n        this.sleep = function(){\n            \n            if(_self.animationName == \"hurt\" || _self.animationName == \"throw\"){\n                return false;\n            }            \n            this.clearAllActions();\n            _self.stats.idleType = \"sleep\";\n            if(window.catpet.isPetActive(_self.id)){\n                _self.changeAnimation(0, \"sleep\", true, 0);\n                //document.getElementById(window.catpet[\"pet-holder\"] + _self.id).className = \"anim sleep \" + _self.stats.direction;\n            }\n            /*_self.currentAnimationTimeout = setTimeout(function(){\n                _self.idle();\n            }, 10 * 60 * 1000);*/\n        };\n\n        this.throwItem = function(item, peaceful, skipSad = false, peacefulTargets){\n            // This happens when the target already received a response that he got hit, now lets make sure the server stops moving.\n            // This In case we sent a movement before we received the got hit but the server received the got hit first\n            if(_self.catIsMine){\n                window.catpetpg.socket.emit(\"throw_confirm\");\n            }\n            \n            /*if(_self.animationName == \"throw\" || _self.animationName == \"hurt\" || (Date.now() - this.lastSnowThrown) / 1000 < 1){\n                return false;\n            }\n            */\n                \n            var itemClass = \"knitball\";\n            if(item){\n                itemClass = item.className;\n            }\n            _self.clearAllActions();\n            //_self.animationName = \"throw\";\n            _self.lastSnowThrown = Date.now();\n            if(window.catpet.isPetActive(_self.id)){\n                //document.getElementById(window.catpet[\"pet-holder\"] + _self.id).className = \"anim throw \" + _self.stats.direction;\n                _self.changeAnimation(0, \"throw\", false, 0);\n            }\n            \n            //timeout to release the ball a bit later\n            setTimeout(function(){\n                if(_self.animationName == \"hurt\")\n                    return;\n                    \n                var f = PIXI.Sprite.from('/images/throw/32/'+itemClass+'.png');\n                f.width = 24;\n                f.height = 24;\n\n                ///// these start positions is to pass along to didwehit function to make sure we did not hit someone behind us\n                var startX =  _self.stats.posLeft;\n                var startY = _self.stats.posTop;\n                f.x = startX;\n                f.y = startY - 50;\n                f.dir = _self.stats.direction;\n                if(_self.stats.direction == \"left\"){\n                    f.x += 25;\n                }\n                else{\n                    f.x += -25;\n                }\n                f.pivot.x = f.width / 2;\n                f.pivot.y = f.height / 2;\n                f.rotation = 0;\n                RenderManager.pgWorld.stage.addChild(f);\n                \n                var startDir = _self.stats.direction;\n                var frameRate = 1/150; // Seconds\n                var frameDelay = 25; // ms\n                var loopTimer = false;\n                var ball = {\n                    position: {x: f.x, y: f.y},\n                    velocity: {x: 9, y: -2},\n                    mass: 2.7, //kg\n                    radius: 8, // 1px = 1cm\n                    restitution: 0.7,\n                    rotation: 0,\n                    rotationIncrease: 0.1\n                };\n                if(f.dir == \"left\"){\n                    ball.velocity = {x: -9, y: -2};\n                    ball.rotationIncrease = -0.1;\n                }\n                var Cd = 0.47;  // Dimensionless\n                var rho = 1.22; // kg / m^3\n                var A = Math.PI * ball.radius * ball.radius / (10000); // m^2\n                var ag = 14.81;  // m / s^2\n                 /////\n                \n                    \n                var throwMoveTick = function(deltaTime){\n                    var Fx = -0.5 * Cd * A * rho * ball.velocity.x * ball.velocity.x * ball.velocity.x / Math.abs(ball.velocity.x);\n                    var Fy = -0.5 * Cd * A * rho * ball.velocity.y * ball.velocity.y * ball.velocity.y / Math.abs(ball.velocity.y);                        \n                    Fx = (isNaN(Fx) ? 0 : Fx);\n                    Fy = (isNaN(Fy) ? 0 : Fy);\n                    var ax = Fx / ball.mass;\n                    var ay = ag + (Fy / ball.mass);\n                        // Integrate to get velocity\n                    ball.velocity.x += ax*(frameRate);\n                    ball.velocity.y += ay*(frameRate);\n                    \n                    ball.position.x += (ball.velocity.x*frameRate*100) * deltaTime;\n                    ball.position.y += (ball.velocity.y*frameRate*100) * deltaTime;\n                    ball.rotation = ball.rotation + ball.rotationIncrease;\n                    f.rotation = ball.rotation;\n                    f.x = ball.position.x;\n                    f.y = ball.position.y;\n                        \n                    ///////////////\n                    if(window.catpet.viewport().width < f.x \n                    || f.x < 0\n                    || f.y < 0\n                    || window.catpet.viewport().height < f.y\n                    || (\n                        !peaceful \n                        && _self.didItemHitCat({x: f.x, y:f.y, exclude: _self.id, startDir: startDir, startX: startX, startY: startY, skipSad: skipSad, peacefulTargets:peacefulTargets }))\n                    ){\n                        if(f && f.parent){\n\n                            let explodeAnim = new PIXI.AnimatedSprite(RenderManager.explosionTextures);\n                            explodeAnim.animationSpeed = 0.250;\n                            explodeAnim.x = f.x - (explodeAnim.width/2);\n                            explodeAnim.y = f.y - (explodeAnim.height/2);\n                            explodeAnim.loop = false;\n                            explodeAnim.scale.x = 0.5;\n                            explodeAnim.scale.y = 0.5;\n                            explodeAnim.play();\n                            explodeAnim.onComplete = function () {\n                                //explodeAnim.destroy(true);\n                                explodeAnim.parent.removeChild(explodeAnim);\n                            };\n                            f.parent.addChild(explodeAnim);\n                            f.parent.removeChild(f);\n                        }\n                        window.RenderManager.pgWorld.ticker.remove(throwMoveTick);\n                    }\n                };\n                window.RenderManager.pgWorld.ticker.add(throwMoveTick);\n                \n                setTimeout(function(){\n                    if(f && f.parent)\n                        f.parent.removeChild(f);\n                        \n                    window.RenderManager.pgWorld.ticker.remove(throwMoveTick);\n                }, 1000);\n            }, 350);\n\n            //timeout when to return to idle\n            _self.currentAnimationTimeout = setTimeout(function(){\n                _self.idle({initiator: \"Throw item\", type: \"idle\"});\n                \n            }, 1100);\n            \n            return true;\n        }; \n\n        this.updatePositions = function(x, y, reportToServer){\n            this.stats.posLeft = x;\n            this.stats.posTop = y;\n            this.reposition(true, false, reportToServer);\n        };\n        this.walkAllowed = function(){\n            if(_self.animationName == \"hurt\" || _self.animationName == \"throw\"){\n                return false;\n            }\n            return true;\n        };\n        this.walk = function(x, y, type = \"walk\"){\n            //console.log(\"Before walk, Current\", this.stats.posLeft, this.stats.posTop);\n            // x and y received here is the CENTER of the cat\n            if(_self.animationName == \"hurt\" || _self.animationName == \"throw\"){\n                return false;\n            }\n            if(!window.catpet.isPetActive(_self.id))\n                return false;\n            \n            //if(this.currentMovingActionInterval)\n                _self.clearAllActions();\n                   \n            _self.stats.idleType = \"idle\";\n                      \n            let positions = this.fixPositions(true, {x:x,y:y});\n            x = positions.x;\n            y = positions.y;\n\n            _self.walkingInfo = {\n                destinationX: x,\n                destinationY: y,\n                speed: (type == \"run\") ? 6 : 3\n            };\n            \n            /*\n            var currX = this.stats.posLeft;\n            var currY = this.stats.posTop;\n            \n            \n            _self.walkingDots = [];\n            var lineLength = Math.sqrt( (currX-x)*(currX-x)+(currY-y)*(currY-y) ) * 3;\n            for( var i=0; i<lineLength; i++ )\n            {\n                _self.walkingDots.push(\n                [\n                    //Math.round( currX+(x-currX)*i/lineLength), \n                    ( currX+(x-currX)*i/lineLength), \n                    //Math.round( currY+(y-currY)*i/lineLength)\n                    ( currY+(y-currY)*i/lineLength)\n                ]\n                );\n            }\n            */\n            var turn = false;\n            if(this.stats.posLeft > x){\n                if(_self.stats.direction != \"left\")\n                    turn = true;\n                    \n                _self.stats.direction = \"left\";\n                //document.getElementById(window.catpet[\"pet-holder\"] + _self.id).className = type + \" anim left\";\n            }\n            else if (this.stats.posLeft < x) {\n                if(_self.stats.direction != \"right\")\n                    turn = true;                \n                    \n                _self.stats.direction = \"right\";\n                //document.getElementById(window.catpet[\"pet-holder\"] + _self.id).className = type + \" anim right\";\n            } else {\n                if(_self.stats.direction != \"right\")\n                    turn = true;\n                                    \n                _self.stats.direction = \"right\";\n                //document.getElementById(window.catpet[\"pet-holder\"] + _self.id).className = type + \" anim right\";   \n            }\n            \n            \n            if(_self.stats.direction == \"left\")\n                _self.rendererPet.scale.x = -1 * _self.scale;\n            else\n                _self.rendererPet.scale.x = _self.scale;                \n            _self.changeAnimation(0, type, true, 0);\n        \n            \n            \n            \n            var sinceLastReport = 0;\n            //this.currentMovingActionInterval = setInterval(, speed);\n            this.currentMovingActionInterval = function(deltaTime) {\n                let lineLength = Math.sqrt((_self.stats.posLeft-_self.walkingInfo.destinationX)*(_self.stats.posLeft-_self.walkingInfo.destinationX)+(_self.stats.posTop-_self.walkingInfo.destinationY)*(_self.stats.posTop-_self.walkingInfo.destinationY)) ;\n            \n                if(lineLength <= 3){\n                    window.RenderManager.pgWorld.ticker.remove(this.currentMovingActionInterval);\n                    this.currentMovingActionInterval = null;\n                    _self.idle({\n                        initiator: \"destination_reached\",\n                        report: false\n                    });\n                    //console.log(\"After walk, end\", _self.stats.posLeft, _self.stats.posTop);\n                    return; \n                }\n                \n                let disToMoveX = (_self.walkingInfo.destinationX -  _self.stats.posLeft) / lineLength;\n                let disToMoveY = (_self.walkingInfo.destinationY -  _self.stats.posTop) / lineLength;\n                    \n                //_self.stats.posLeft = _self.walkingDots[0][0];\n                _self.stats.posLeft += disToMoveX * deltaTime * (_self.walkingInfo.speed / 3);\n                //_self.stats.posTop = _self.walkingDots[0][1];\n                _self.stats.posTop  += disToMoveY * deltaTime * (_self.walkingInfo.speed / 3);\n                \n                _self.drawPositions();\n                //_self.walkingDots.splice(0, speed);\n                //_self.dots.shift();\n                sinceLastReport++;\n                if(_self.catIsMine === true && window.catpet.isPlayground && sinceLastReport >= 60){\n                    sinceLastReport = 0;\n                    window.catpetpg.socket.emit(\"r_pos\", [Math.round(_self.stats.posLeft), Math.round(_self.stats.posTop)]);\n                }\n            }\n            window.RenderManager.pgWorld.ticker.add(this.currentMovingActionInterval);\n            return true;      \n        };\n        \n        this.clearAllActions = function(data){\n            \n            if(!window.catpet.isPlayground && _self.catIsMine && window.catpet.songElement && (!data || !data.keepAudio)){\n                window.catpet.songElement.currentTime = 0;\n                window.catpet.songElement.pause();\n            }\n            \n            \n            if(window.catpet.isPlayground && _self.catIsMine && (!data || !data.keepAudio)){\n                var audio = document.getElementById(\"dance-audio\");\n                if(audio){\n                    audio.pause();\n                    audio.currentTime = 0;\n                }\n            }\n            \n            _self.animationName = null;\n            _self.walkingDots = [];\n            clearInterval(_self.changeDanceInterval);\n            //clearInterval(_self.currentMovingActionInterval);\n            window.RenderManager.pgWorld.ticker.remove(_self.currentMovingActionInterval);\n            clearInterval(_self.pettingRewardInterval);\n            clearTimeout(_self.currentAnimationTimeout);\n            clearTimeout(_self.startPettingTimeout);\n            _self.startPettingTimeout = null;\n            _self.currentAnimationTimeout = null;\n            _self.currentMovingActionInterval = null;\n        };\n        \n        this.idle = function(data){\n            //if(!window.catpet.isPetActive())\n            //    return;\n            if(!data){\n                data = {};\n            }\n            if(typeof data.report == \"undefined\")\n                data.report = true;\n            if(data.direction)\n                _self.stats.direction = data.direction;\n                \n            if(data.type){\n                this.stats.idleType = data.type;\n            } else {\n                //this.stats.idleType = \"idle\";\n            }\n            \n            _self.clearAllActions();\n            if(window.catpet.isPetActive(_self.id)){\n                //document.getElementById(window.catpet[\"pet-holder\"] + _self.id).className = _self.stats.idleType + \" anim \" + _self.stats.direction;\n                _self.changeAnimation(0, _self.stats.idleType, true, 0);\n                if(window.catpet.isTabActive && !window.catpet.isPlayground && data.initiator == \"destination_reached\"){\n                    window.catpet.sendToBackground(\"updatePositions\", {\n                        posLeft:_self.stats.posLeft, \n                        posTop: _self.stats.posTop,\n                        initiator: \"idle\"\n                    }, function(response) {\n                        //_self.stats.posLeft = parseInt(document.getElementById(window.catpet[\"external-holder\"] + _self.id).style.left);\n                        //_self.stats.posTop = parseInt(document.getElementById(window.catpet[\"external-holder\"] + _self.id).style.top);\n                    });\n                } \n                else if (window.catpet.isPlayground && _self.catIsMine){\n                    if(data.report){\n                        window.catpetpg.socket.emit(\n                            \"action\", {\"name\": _self.stats.idleType, \n                            \"x\": _self.stats.posLeft, \n                            \"y\": _self.stats.posTop,\n                            \"initiator\": data.initiator\n                        });\n                        \n                    }\n                }\n            }            \n        }\n        \n        this.randomEvent = function(){\n            if(!window.catpet.isPetActive(_self.id)){\n                return;\n            }\n                        \n            if(!_self.isDragging){\n                // \n                var rand = Math.floor(Math.random() * (1200)) + 1;\n                \n                if(rand <= 50 && !window.catpet.isPlayground){\n                    if(_self.stats.walkType != \"FALSE\")\n                        _self.randomWalk();\n                } else if(rand <= 60 && !window.catpet.isPlayground) {\n                    if(_self.stats.talk || typeof _self.stats.talk == \"undefined\")\n                        _self.randomTalk();\n                } else if(rand <= 70 && rand >= 61) {\n                    //if(_self.stats.talk || typeof _self.stats.talk == \"undefined\")\n                        _self.lick();\n                }\n            }\n        };\n        \n        this.randomWalk = function(run){\n            if(this.currentMovingActionInterval)\n                return;\n                \n            var randomX = Math.floor(Math.random() * (window.catpet.viewport().width + 1));\n            var randomY = Math.floor(Math.random() * (window.catpet.viewport().height + 1));\n            if(_self.stats.walkType == \"EDGES\"){\n                var r1 = distanceBetweenTwoPoints(randomX, randomY, 0, randomY);\n                var r2 = distanceBetweenTwoPoints(randomX, randomY, randomX, 0);\n                var r3 = distanceBetweenTwoPoints(randomX, randomY, window.catpet.viewport().width , randomY);\n                var r4 = distanceBetweenTwoPoints(randomX, randomY, randomX, window.catpet.viewport().height);\n                var val = Math.min(r1, r2, r3, r4);\n                if(val == r1)\n                    randomX = 0;\n                if(val == r2)\n                    randomY = 0;\n                if(val == r3)\n                    randomX = window.catpet.viewport().width;\n                if(val == r4)\n                    randomY = window.catpet.viewport().height;                \n            } else if(_self.stats.walkType == \"BOTTOM\"){\n                    randomY = window.catpet.viewport().height;                \n            }\n            \n            \n            \n            if(run)\n                _self.walk(randomX, randomY, \"run\");\n            else\n                _self.walk(randomX, randomY, \"walk\");\n        };\n        \n        this.hide = function(){\n            if(!window.catpet.isPetActive(_self.id)){\n                window.catpet.log(\"Can't Hide inactive pet\");\n                return;\n            }\n            window.catpet.log(\"Hiding\");\n            //clearTimeout(this.timer);\n            \n            window.catpet.activePets[_self.id].clearAllActions();\n            //delete window.catpet.activePets[_self.id];                        \n            var el = document.getElementById(\"pet-external-\" + _self.id);\n            if(el){\n                el.remove();\n            }   \n        }\n        \n        this.changeTagColor = function(color){\n            _self.stats.tagColor = color;\n            _self.rendererName.style = (this.tagStyle());\n        }\n        \n        this.rename = function(txt){\n            _self.rendererName.text = (txt);\n            //_self.rendererName.updateText(txt);\n            //_self.rendererLevel.x  -4 - (_self.rendererName.width / 2);\n            this.setLevel(this.stats.level);\n        };\n        \n        this.renameClowder = function(txt){\n            _self.rendererClowder.text = txt\n        };\n        this.setLevel = function(txt){\n            _self.rendererLevel.text = txt + \" |\";\n            _self.rendererLevel.x = -4 - (_self.rendererName.width / 2);\n        };\n        \n        this.kill = function(){\n            if(!window.catpet.isPetActive(_self.id)){\n                window.catpet.log(\"Can't kill inactive pet\");\n                return;\n            }\n            window.catpet.log(\"Killing\");\n            //clearTimeout(this.timer);\n            \n            \n            if(window.catpet.activePets[_self.id].pingInterval){\n                clearInterval(window.catpet.activePets[_self.id].pingInterval);\n            }\n            \n            window.catpet.activePets[_self.id].clearAllActions();\n            \n            if(_self.rendererContainer){\n                //_self.rendererContainer.destroy(true);\n                _self.rendererContainer.parent.removeChild(_self.rendererContainer);\n            }\n            delete window.catpet.activePets[_self.id];                        \n            if(_self.devTracker){\n                _self.devTracker.parent.removeChild(_self.devTracker);\n            }\n            \n            \n            var el = document.getElementById(window.catpet[\"external-holder\"] + _self.id);\n            if(el){\n                el.remove();\n            }\n\n        };\n    };\n    \n    \n    \n    window.catpet.sendToBackground = function(method, data, callback){\n        try{\n            if(window.catpet.isPlayground)\n                window.postMessage({method: method, data: data}, \"*\");\n            else {\n                chrome.runtime.sendMessage({method: method, data: data}, function(response) {\n                    if(callback)\n                        callback.call(this, response);\n                });\n            }\n        } catch(e){\n            window.catpet.log(\"CatPet: Failed background request\", e);\n        }\n    };\n    window.catpet.viewport = function(){\n        var e = window.catpet.container;\n        if(!window.catpet.isPlayground)\n            e = window;\n        var a = 'inner';\n        if (!('innerWidth' in window)){\n            a = 'client';\n        }\n        \n        if(window.catpet.isPlayground){\n            return {\n                actualWidth: e[ a+'Width' ] , \n                actualHeight : e[ a+'Height' ],\n                width: window.RenderManager.width, \n                height: window.RenderManager.height\n            };\n        } else{\n            return { width : window[ a+'Width' ] , height : window[ a+'Height' ] };        \n        }\n        \n        /*\n        var e = window;\n        var a = 'inner';\n        if (!('innerWidth' in window)){\n            a = 'client';\n            e = document.documentElement || document.body;\n        }\n        return { width : e[ a+'Width' ] , height : e[ a+'Height' ] }\n        */        \n    };\n    window.catpet.killMeowContextMenu = function(){\n        if(window.catpet.isPlayground)\n            return;\n        var x = document.getElementById(\"catpet-menu\");\n        if(x)\n            x.remove();        \n    };\n    // OLD - NOW USE MULTIPLE PETS\n    window.catpet.activePets = {};\n};\n\n(function init() {\n    if(window.catpet)\n        return;\n        catPetSetObject();\n        \n        // CHECK IF WE NEED TO STOP DRAGGING\n        document.addEventListener(\"mouseup\", function (e) {\n            if(window.catpet.draggableElement){\n                for(var x in window.catpet.activePets){\n                    \n                    if(window.catpet.activePets[x].isDragging == true){\n                        \n                        window.catpet.activePets[x].stats.posLeft = window.catpet.dragPositions.x_pos - window.catpet.dragPositions.x_elem;\n                        window.catpet.activePets[x].stats.posTop = window.catpet.dragPositions.y_pos - window.catpet.dragPositions.y_elem;\n                        \n                        if(!window.catpet.isPlayground){\n                            window.catpet.activePets[x].stats.posLeft += (window.catpet.activePets[x].browserPetData.width / 2);\n                            window.catpet.activePets[x].stats.posTop += window.catpet.activePets[x].browserPetData.height;\n                            window.catpet.activePets[x].reposition(true, true); //changeHTML, updateBG, report\n                        } else {\n                            window.catpet.activePets[x].reposition(true, false); //changeHTML, updateBG/ report\n                        }\n                        window.catpet.draggableElement = null; \n                        window.catpet.activePets[x].isDragging = false;  \n                    }\n                }\n            }            \n        });\n        \n        // CLOSE MEOW MENU ON MOUSE UP\n        if(!window.catpet.isPlayground){\n            document.getElementsByTagName(\"body\")[0].addEventListener(\"mousedown\", function(e){\n                // Clicked anywhere but the pet, close menu\n                var menuItemClicked = false;\n                for(var i = 0; i < e.path.length; i++){\n                    if(e.path[i].id == \"catpet-menu\"){\n                        menuItemClicked = true;\n                        break;\n                    }\n                }\n                if(!menuItemClicked)\n                    window.catpet.killMeowContextMenu();\n            });         \n        \n            window.onfocus = function () {\n              window.catpet.isTabActive = true; \n            }; \n\n            window.onblur = function () { \n              window.catpet.isTabActive = false; \n            }; \n\n            window.onresize = function(){\n                for (var id in window.catpet.activePets) {\n                    if (window.catpet.activePets.hasOwnProperty(id)) {\n                        if(window.catpet.activePets[id])\n                            window.catpet.activePets[id].reposition(true, true);\n                    }\n                }\n\n            };\n        }\n\n        \n\n    \n    \n    // Get all the info from background and draw pet if we need to. (if isPetActive then it's SPA any way and it's already drawn)\n    if(!window.catpet.isPlayground && !window.catpet.isPetActive()){\n        // Get info from Background\n\n            chrome.runtime.onMessage.addListener(\n              function(request, sender, sendResponse) {\n                //window.catpet.log(request);\n                var data = {};\n                // Each tab we switch tab, the new active tab received this reposition request to place the cat in the current position\n                if (request.method == \"newActiveTab\"){\n                    //window.catpet.log(\"Listen: newActiveTab Pet Request\", request.data);\n                    if(!window.catpet.isPetActive(window.catpet.defaultCatID))\n                        return;\n                    \n                    window.catpet.activePets[window.catpet.defaultCatID].loadDataFromLocalStorage(request.data);\n                    window.catpet.activePets[window.catpet.defaultCatID].reposition(true, false);\n                    //window.catpet.activePets[window.catpet.defaultCatID].idle({initiator: \"Tab switch\"});\n                    \n                }\n                else if (request.method == \"browser-assets-ready\"){\n                    if(request.data.pet == null)\n                        return;\n                        \n                    // Make sure again that pet is not active (since request was async, something could happen)\n                    if(window.catpet.isPetActive())\n                        return;\n                    \n                    window.catpet.isDebug = request.data.isDebug;\n                    window.catpet.log(\"Listen: Initiate request\", request);\n                    if(request.data.pet.show && new Date().getTime() > request.data.pet.hideUntil){\n                        window.catpet.activePets[window.catpet.defaultCatID] = new window.catpet.Pet();\n                        window.catpet.activePets[window.catpet.defaultCatID].loadDataFromLocalStorage(request.data.pet);\n                        window.catpet.activePets[window.catpet.defaultCatID].initiate({\n                            catID: window.catpet.defaultCatID,\n                            browserPet: true\n                        });\n                    }   \n                }\n                else if (request.method == \"hide\"){\n                    window.catpet.log(\"Listen: Hide Pet Request\");\n                    if(window.catpet.activePets[window.catpet.defaultCatID])\n                        window.catpet.activePets[window.catpet.defaultCatID].kill();\n                    else\n                        window.catpet.log(\"Cat is not active\");\n                }\n                else if (request.method == \"revive\"){\n                    window.catpet.log(\"Listen: Revive Pet Request\");\n                    if(window.catpet.activePets[window.catpet.defaultCatID])\n                        window.catpet.activePets[window.catpet.defaultCatID].kill();\n                        \n                    window.catpet.activePets[window.catpet.defaultCatID] = new window.catpet.Pet();\n                    window.catpet.activePets[window.catpet.defaultCatID].loadDataFromLocalStorage(request.data);        \n                    window.catpet.activePets[window.catpet.defaultCatID].initiate({\n                        catID: window.catpet.defaultCatID,\n                        browserPet: true\n                    });\n                }\n                else if (request.method == \"update-options\"){\n                    window.catpet.log(\"Listen: Update options\");\n                    window.catpet.activePets[window.catpet.defaultCatID].loadDataFromLocalStorage(request.data);\n                    window.catpet.activePets[window.catpet.defaultCatID].reposition(true, false);\n                }\n                else if (request.method == \"update-idle\"){\n                    window.catpet.log(\"Listen: Update idle\");\n                    window.catpet.activePets[window.catpet.defaultCatID].loadDataFromLocalStorage(request.data);\n                    window.catpet.activePets[window.catpet.defaultCatID].idle({initiator: \"Update idle request\"});\n                }                \n                else if (request.method == \"action\"){\n                    if(!window.catpet.isPetActive())\n                        return;                                 \n                    if(\n                        request.data.name != \"talk\" \n                        && request.data.name != \"sleep\" \n                        && (\n                            window.catpet.activePets[window.catpet.defaultCatID].startPettingTimeout \n                            || window.catpet.activePets[window.catpet.defaultCatID].animationName == \"petting\"\n                            || window.catpet.activePets[window.catpet.defaultCatID].animationName == \"dance\"\n                            || window.catpet.activePets[window.catpet.defaultCatID].animationName == \"lick\"\n                        )\n                    )\n                        return;\n                    var pet = window.catpet.activePets[window.catpet.defaultCatID];\n                    switch(request.data.name){\n                        case \"walk\":\n                            if(pet.stats.walkType != \"FALSE\")\n                                pet.randomWalk();\n                        break;\n                        case \"run\":\n                            if(pet.stats.walkType != \"FALSE\")\n                                pet.randomWalk(1);\n                        break;                        \n                        case \"talk\":\n                            if(pet && pet.stats.talk)\n                                pet.say(request.data.parameters.text);\n                        break;\n                        case \"lick\":\n                            pet.lick();\n                        break;\n                        case \"sleep\":\n                            //pet.stats.idleType = request.data.name;\n                            pet.sleep();\n                        break;\n                        case \"sad\":\n                            //pet.stats.idleType = request.data.name;\n                            pet.sad();\n                        break;                        \n                    }\n                }\n                sendResponse({});\n            }\n            );\n    }\n   \n    \n    if(window.catpet.isPlayground){\n        window.catpet.preload([\n            window.catpet.getURL('/images/icons/coin.png'),\n            window.catpet.getURL('/images/icons/chicken.png'),\n            window.catpet.getURL('/images/icons/fish.png'),\n            window.catpet.getURL('/images/bubble.png'),\n            window.catpet.getURL('/images/bubble-bl.png'),\n            window.catpet.getURL('/images/bubble-br.png'),\n            window.catpet.getURL('/images/bubble-l.png')\n        ]);\n    }\n})();\n\n\n","var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it)) {\n    throw TypeError(String(it) + ' is not an object');\n  } return it;\n};\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toLength = require('../internals/to-length');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","var has = require('../internals/has');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!has(target, key)) defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n  }\n};\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar quot = /\"/g;\n\n// B.2.3.2.1 CreateHTML(string, tag, attribute, value)\n// https://tc39.github.io/ecma262/#sec-createhtml\nmodule.exports = function (string, tag, attribute, value) {\n  var S = String(requireObjectCoercible(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + String(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var fails = require('../internals/fails');\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !fails(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar setGlobal = require('../internals/set-global');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target      - name of the target object\n  options.global      - target is the global object\n  options.stat        - export as static methods of target\n  options.proto       - export as prototype methods of target\n  options.real        - real prototype method for the `pure` version\n  options.forced      - export even if the native feature is available\n  options.bind        - bind methods to the target, required for the `pure` version\n  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe      - use the simple assignment of property instead of delete + defineProperty\n  options.sham        - add a flag to not completely full polyfills\n  options.enumerable  - export as enumerable property\n  options.noTargetGet - prevent calling a getter on target\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || setGlobal(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.noTargetGet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty === typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    // extend global\n    redefine(target, key, sourceProperty, options);\n  }\n};\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","var fails = require('../internals/fails');\n\n// check the existence of a method, lowercase\n// of a tag and escaping quotes in arguments\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    var test = ''[METHOD_NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  });\n};\n","var shared = require('../internals/shared');\n\nmodule.exports = shared('native-function-to-string', Function.toString);\n","var path = require('../internals/path');\nvar global = require('../internals/global');\n\nvar aFunction = function (variable) {\n  return typeof variable == 'function' ? variable : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(path[namespace]) || aFunction(global[namespace])\n    : path[namespace] && path[namespace][method] || global[namespace] && global[namespace][method];\n};\n","var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line no-undef\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func\n  Function('return this')();\n","var hasOwnProperty = {}.hasOwnProperty;\n\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","module.exports = {};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar split = ''.split;\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins\n  return !Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split.call(it, '') : Object(it);\n} : Object;\n","var NATIVE_WEAK_MAP = require('../internals/native-weak-map');\nvar global = require('../internals/global');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar objectHas = require('../internals/has');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP) {\n  var store = new WeakMap();\n  var wmget = store.get;\n  var wmhas = store.has;\n  var wmset = store.set;\n  set = function (it, metadata) {\n    wmset.call(store, it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return wmget.call(store, it) || {};\n  };\n  has = function (it) {\n    return wmhas.call(store, it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return objectHas(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return objectHas(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","var fails = require('../internals/fails');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : typeof detection == 'function' ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","module.exports = false;\n","var global = require('../internals/global');\nvar nativeFunctionToString = require('../internals/function-to-string');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = typeof WeakMap === 'function' && /native code/.test(nativeFunctionToString.call(WeakMap));\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar objectKeys = require('../internals/object-keys');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\n\nvar nativeAssign = Object.assign;\n\n// `Object.assign` method\n// https://tc39.github.io/ecma262/#sec-object.assign\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !nativeAssign || fails(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var symbol = Symbol();\n  var alphabet = 'abcdefghijklmnopqrst';\n  A[symbol] = 7;\n  alphabet.split('').forEach(function (chr) { B[chr] = chr; });\n  return nativeAssign({}, A)[symbol] != 7 || objectKeys(nativeAssign({}, B)).join('') != alphabet;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var argumentsLength = arguments.length;\n  var index = 1;\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  var propertyIsEnumerable = propertyIsEnumerableModule.f;\n  while (argumentsLength > index) {\n    var S = IndexedObject(arguments[index++]);\n    var keys = getOwnPropertySymbols ? objectKeys(S).concat(getOwnPropertySymbols(S)) : objectKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) {\n      key = keys[j++];\n      if (!DESCRIPTORS || propertyIsEnumerable.call(S, key)) T[key] = S[key];\n    }\n  } return T;\n} : nativeAssign;\n","var DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar anObject = require('../internals/an-object');\nvar toPrimitive = require('../internals/to-primitive');\n\nvar nativeDefineProperty = Object.defineProperty;\n\n// `Object.defineProperty` method\n// https://tc39.github.io/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? nativeDefineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return nativeDefineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPrimitive = require('../internals/to-primitive');\nvar has = require('../internals/has');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\nvar nativeGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? nativeGetOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return nativeGetOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (has(O, P)) return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O, P), O[P]);\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertynames\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","exports.f = Object.getOwnPropertySymbols;\n","var has = require('../internals/has');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !has(hiddenKeys, key) && has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~indexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.github.io/ecma262/#sec-object.keys\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","'use strict';\nvar nativePropertyIsEnumerable = {}.propertyIsEnumerable;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !nativePropertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.github.io/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : nativePropertyIsEnumerable;\n","var getBuiltIn = require('../internals/get-built-in');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? keys.concat(getOwnPropertySymbols(it)) : keys;\n};\n","module.exports = require('../internals/global');\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar has = require('../internals/has');\nvar setGlobal = require('../internals/set-global');\nvar nativeFunctionToString = require('../internals/function-to-string');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar getInternalState = InternalStateModule.get;\nvar enforceInternalState = InternalStateModule.enforce;\nvar TEMPLATE = String(nativeFunctionToString).split('toString');\n\nshared('inspectSource', function (it) {\n  return nativeFunctionToString.call(it);\n});\n\n(module.exports = function (O, key, value, options) {\n  var unsafe = options ? !!options.unsafe : false;\n  var simple = options ? !!options.enumerable : false;\n  var noTargetGet = options ? !!options.noTargetGet : false;\n  if (typeof value == 'function') {\n    if (typeof key == 'string' && !has(value, 'name')) createNonEnumerableProperty(value, 'name', key);\n    enforceInternalState(value).source = TEMPLATE.join(typeof key == 'string' ? key : '');\n  }\n  if (O === global) {\n    if (simple) O[key] = value;\n    else setGlobal(key, value);\n    return;\n  } else if (!unsafe) {\n    delete O[key];\n  } else if (!noTargetGet && O[key]) {\n    simple = true;\n  }\n  if (simple) O[key] = value;\n  else createNonEnumerableProperty(O, key, value);\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, 'toString', function toString() {\n  return typeof this == 'function' && getInternalState(this).source || nativeFunctionToString.call(this);\n});\n","// `RequireObjectCoercible` abstract operation\n// https://tc39.github.io/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","var global = require('../internals/global');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nmodule.exports = function (key, value) {\n  try {\n    createNonEnumerableProperty(global, key, value);\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","var global = require('../internals/global');\nvar setGlobal = require('../internals/set-global');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || setGlobal(SHARED, {});\n\nmodule.exports = store;\n","var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.4.1',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: '© 2019 Denis Pushkarev (zloirock.ru)'\n});\n","var toInteger = require('../internals/to-integer');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(length, length).\nmodule.exports = function (index, length) {\n  var integer = toInteger(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `ToInteger` abstract operation\n// https://tc39.github.io/ecma262/#sec-tointeger\nmodule.exports = function (argument) {\n  return isNaN(argument = +argument) ? 0 : (argument > 0 ? floor : ceil)(argument);\n};\n","var toInteger = require('../internals/to-integer');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.github.io/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toInteger(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `ToObject` abstract operation\n// https://tc39.github.io/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return Object(requireObjectCoercible(argument));\n};\n","var isObject = require('../internals/is-object');\n\n// `ToPrimitive` abstract operation\n// https://tc39.github.io/ecma262/#sec-toprimitive\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (input, PREFERRED_STRING) {\n  if (!isObject(input)) return input;\n  var fn, val;\n  if (PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (typeof (fn = input.valueOf) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (!PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var id = 0;\nvar postfix = Math.random();\n\nmodule.exports = function (key) {\n  return 'Symbol(' + String(key === undefined ? '' : key) + ')_' + (++id + postfix).toString(36);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.github.io/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","var $ = require('../internals/export');\nvar assign = require('../internals/object-assign');\n\n// `Object.assign` method\n// https://tc39.github.io/ecma262/#sec-object.assign\n$({ target: 'Object', stat: true, forced: Object.assign !== assign }, {\n  assign: assign\n});\n","var $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar nativeKeys = require('../internals/object-keys');\nvar fails = require('../internals/fails');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.github.io/ecma262/#sec-object.keys\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/forced-string-html-method');\n\n// `String.prototype.anchor` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.anchor\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('anchor') }, {\n  anchor: function anchor(name) {\n    return createHTML(this, 'a', 'name', name);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/forced-string-html-method');\n\n// `String.prototype.blink` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.blink\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('blink') }, {\n  blink: function blink() {\n    return createHTML(this, 'blink', '', '');\n  }\n});\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n"],"sourceRoot":""}